<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRODTORG | Интернет-магазин</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ==================== ГЛОБАЛЬНЫЕ СТИЛИ ==================== */
        :root {
            /* Цветовая палитра */
            --primary: #2A4B8C;
            --primary-light: #3A6BC7;
            --primary-dark: #1A3A6C;
            --secondary: #FF6B35;
            --secondary-light: #FF8B5C;
            --secondary-dark: #E55A2B;
            --accent: #00C9B7;
            --accent-light: #2DE5D0;
            --accent-dark: #00A896;
            
            /* Текст */
            --text-dark: #2C3E50;
            --text-medium: #5D6D7E;
            --text-light: #7F8C8D;
            --text-white: #FFFFFF;
            
            /* Фоны */
            --bg-white: #FFFFFF;
            --bg-light: #F8F9FA;
            --bg-lighter: #F2F4F6;
            --bg-dark: #1A1A2E;
            --bg-darker: #0F0F1A;
            
            /* Границы */
            --border-light: #E1E8ED;
            --border-medium: #D1D8DF;
            --border-dark: #B1BAC4;
            
            /* Статусы */
            --success: #2ECC71;
            --success-light: #82E0AA;
            --warning: #F39C12;
            --warning-light: #F8C471;
            --danger: #E74C3C;
            --danger-light: #F1948A;
            --info: #3498DB;
            --info-light: #85C1E9;
            
            /* Тени */
            --shadow-xs: 0 1px 3px rgba(0,0,0,0.05);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.12);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.16);
            --shadow-xl: 0 12px 36px rgba(0,0,0,0.20);
            --shadow-inner: inset 0 2px 4px rgba(0,0,0,0.06);
            
            /* Скругления */
            --radius-xs: 4px;
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --radius-full: 9999px;
            
            /* Анимации */
            --transition-fast: 150ms ease;
            --transition-normal: 250ms ease;
            --transition-slow: 350ms ease;
            
            /* Размеры */
            --header-height: 80px;
            --sidebar-width: 280px;
            --container-max: 1400px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            color: var(--text-dark);
            background: var(--bg-light);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
            color: var(--text-dark);
        }
        
        h1 { font-size: 3rem; }
        h2 { font-size: 2.5rem; }
        h3 { font-size: 2rem; }
        h4 { font-size: 1.5rem; }
        h5 { font-size: 1.25rem; }
        h6 { font-size: 1rem; }
        
        p {
            margin-bottom: 1rem;
        }
        
        a {
            color: var(--primary);
            text-decoration: none;
            transition: color var(--transition-fast);
        }
        
        a:hover {
            color: var(--primary-light);
        }
        
        ul, ol {
            list-style-position: inside;
            margin-bottom: 1rem;
        }
        
        /* ==================== ТИПОГРАФИЯ ==================== */
        .text-xs { font-size: 0.75rem; }
        .text-sm { font-size: 0.875rem; }
        .text-base { font-size: 1rem; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .text-4xl { font-size: 2.25rem; }
        
        .font-light { font-weight: 300; }
        .font-normal { font-weight: 400; }
        .font-medium { font-weight: 500; }
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        .font-extrabold { font-weight: 800; }
        
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-left { text-align: left; }
        
        .text-primary { color: var(--primary); }
        .text-secondary { color: var(--secondary); }
        .text-accent { color: var(--accent); }
        .text-success { color: var(--success); }
        .text-warning { color: var(--warning); }
        .text-danger { color: var(--danger); }
        .text-info { color: var(--info); }
        .text-dark { color: var(--text-dark); }
        .text-medium { color: var(--text-medium); }
        .text-light { color: var(--text-light); }
        .text-white { color: var(--text-white); }
        
        /* ==================== КОНТЕЙНЕРЫ И СЕТКА ==================== */
        .container {
            width: 100%;
            max-width: var(--container-max);
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        .container-fluid {
            width: 100%;
            padding: 0 1.5rem;
        }
        
        .grid {
            display: grid;
            gap: 1.5rem;
        }
        
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }
        .grid-4 { grid-template-columns: repeat(4, 1fr); }
        .grid-5 { grid-template-columns: repeat(5, 1fr); }
        .grid-6 { grid-template-columns: repeat(6, 1fr); }
        
        @media (max-width: 1200px) {
            .grid-6 { grid-template-columns: repeat(5, 1fr); }
            .grid-5 { grid-template-columns: repeat(4, 1fr); }
        }
        
        @media (max-width: 992px) {
            .grid-6, .grid-5, .grid-4 { grid-template-columns: repeat(3, 1fr); }
            .grid-3 { grid-template-columns: repeat(2, 1fr); }
        }
        
        @media (max-width: 768px) {
            .grid-6, .grid-5, .grid-4, .grid-3 { grid-template-columns: repeat(2, 1fr); }
            .grid-2 { grid-template-columns: 1fr; }
        }
        
        @media (max-width: 576px) {
            .grid-6, .grid-5, .grid-4, .grid-3, .grid-2 { grid-template-columns: 1fr; }
        }
        
        .flex {
            display: flex;
        }
        
        .flex-col { flex-direction: column; }
        .flex-row { flex-direction: row; }
        .flex-wrap { flex-wrap: wrap; }
        .flex-nowrap { flex-wrap: nowrap; }
        
        .items-start { align-items: flex-start; }
        .items-center { align-items: center; }
        .items-end { align-items: flex-end; }
        .items-stretch { align-items: stretch; }
        
        .justify-start { justify-content: flex-start; }
        .justify-center { justify-content: center; }
        .justify-end { justify-content: flex-end; }
        .justify-between { justify-content: space-between; }
        .justify-around { justify-content: space-around; }
        .justify-evenly { justify-content: space-evenly; }
        
        .gap-0 { gap: 0; }
        .gap-1 { gap: 0.25rem; }
        .gap-2 { gap: 0.5rem; }
        .gap-3 { gap: 0.75rem; }
        .gap-4 { gap: 1rem; }
        .gap-5 { gap: 1.5rem; }
        .gap-6 { gap: 2rem; }
        .gap-8 { gap: 2.5rem; }
        .gap-10 { gap: 3rem; }
        
        /* ==================== КНОПКИ ==================== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius-md);
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            line-height: 1.5;
            cursor: pointer;
            transition: all var(--transition-normal);
            position: relative;
            overflow: hidden;
            text-decoration: none;
            white-space: nowrap;
            user-select: none;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .btn:active {
            transform: translateY(0);
            box-shadow: var(--shadow-sm);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }
        
        .btn-lg {
            padding: 1rem 2rem;
            font-size: 1.125rem;
        }
        
        .btn-xl {
            padding: 1.25rem 2.5rem;
            font-size: 1.25rem;
        }
        
        .btn-block {
            width: 100%;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--text-white);
            border: 2px solid var(--primary);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
            border-color: var(--primary-light);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary), var(--secondary-light));
            color: var(--text-white);
            border: 2px solid var(--secondary);
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, var(--secondary-light), var(--secondary));
            border-color: var(--secondary-light);
        }
        
        .btn-accent {
            background: linear-gradient(135deg, var(--accent), var(--accent-light));
            color: var(--text-white);
            border: 2px solid var(--accent);
        }
        
        .btn-accent:hover {
            background: linear-gradient(135deg, var(--accent-light), var(--accent));
            border-color: var(--accent-light);
        }
        
        .btn-outline {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        
        .btn-outline:hover {
            background: var(--primary);
            color: var(--text-white);
        }
        
        .btn-outline-secondary {
            background: transparent;
            color: var(--secondary);
            border: 2px solid var(--secondary);
        }
        
        .btn-outline-secondary:hover {
            background: var(--secondary);
            color: var(--text-white);
        }
        
        .btn-light {
            background: var(--bg-white);
            color: var(--text-dark);
            border: 2px solid var(--border-light);
        }
        
        .btn-light:hover {
            background: var(--bg-lighter);
            border-color: var(--border-medium);
        }
        
        .btn-dark {
            background: var(--bg-dark);
            color: var(--text-white);
            border: 2px solid var(--bg-dark);
        }
        
        .btn-dark:hover {
            background: var(--bg-darker);
            border-color: var(--bg-darker);
        }
        
        .btn-success {
            background: var(--success);
            color: var(--text-white);
            border: 2px solid var(--success);
        }
        
        .btn-warning {
            background: var(--warning);
            color: var(--text-white);
            border: 2px solid var(--warning);
        }
        
        .btn-danger {
            background: var(--danger);
            color: var(--text-white);
            border: 2px solid var(--danger);
        }
        
        .btn-info {
            background: var(--info);
            color: var(--text-white);
            border: 2px solid var(--info);
        }
        
        .btn-icon {
            width: 3rem;
            height: 3rem;
            padding: 0;
            border-radius: var(--radius-full);
        }
        
        .btn-icon-sm {
            width: 2.5rem;
            height: 2.5rem;
        }
        
        .btn-icon-lg {
            width: 3.5rem;
            height: 3.5rem;
        }
        
        /* ==================== ФОРМЫ ==================== */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-dark);
        }
        
        .form-control {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid var(--border-light);
            border-radius: var(--radius-md);
            font-family: 'Roboto', sans-serif;
            font-size: 1rem;
            color: var(--text-dark);
            background: var(--bg-white);
            transition: all var(--transition-fast);
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(42, 75, 140, 0.1);
        }
        
        .form-control:disabled {
            background: var(--bg-lighter);
            color: var(--text-light);
            cursor: not-allowed;
        }
        
        .form-text {
            display: block;
            margin-top: 0.25rem;
            font-size: 0.875rem;
            color: var(--text-light);
        }
        
        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%235D6D7E' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 16px;
            padding-right: 2.5rem;
        }
        
        .form-check {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
        }
        
        .form-check-input {
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid var(--border-medium);
            border-radius: var(--radius-xs);
            background: var(--bg-white);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .form-check-input:checked {
            background: var(--primary);
            border-color: var(--primary);
        }
        
        .form-check-label {
            user-select: none;
        }
        
        .form-range {
            width: 100%;
            height: 0.5rem;
            background: var(--bg-lighter);
            border-radius: var(--radius-full);
            outline: none;
            appearance: none;
        }
        
        .form-range::-webkit-slider-thumb {
            appearance: none;
            width: 1.25rem;
            height: 1.25rem;
            background: var(--primary);
            border-radius: var(--radius-full);
            cursor: pointer;
        }
        
        /* ==================== КАРТОЧКИ ==================== */
        .card {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-light);
            overflow: hidden;
            transition: all var(--transition-normal);
        }
        
        .card:hover {
            border-color: var(--border-medium);
            box-shadow: var(--shadow-lg);
            transform: translateY(-4px);
        }
        
        .card-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-light);
            background: var(--bg-lighter);
        }
        
        .card-body {
            padding: 1.5rem;
        }
        
        .card-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--border-light);
            background: var(--bg-lighter);
        }
        
        .card-img {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .card-img-top {
            border-radius: var(--radius-lg) var(--radius-lg) 0 0;
        }
        
        .card-img-bottom {
            border-radius: 0 0 var(--radius-lg) var(--radius-lg);
        }
        
        /* ==================== ШАПКА ==================== */
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--header-height);
            background: var(--bg-white);
            box-shadow: var(--shadow-sm);
            z-index: 1000;
            transition: all var(--transition-normal);
        }
        
        .header.scrolled {
            height: 70px;
            box-shadow: var(--shadow-md);
        }
        
        .header-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 100%;
            padding: 0 2rem;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-white);
            font-size: 1.5rem;
            font-weight: 800;
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            line-height: 1;
        }
        
        .logo-subtitle {
            font-size: 0.75rem;
            color: var(--text-light);
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .nav-menu {
            display: flex;
            align-items: center;
            gap: 2rem;
        }
        
        .nav-link {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            color: var(--text-dark);
            text-decoration: none;
            padding: 0.5rem 0;
            position: relative;
            transition: color var(--transition-fast);
        }
        
        .nav-link:hover {
            color: var(--primary);
        }
        
        .nav-link.active {
            color: var(--primary);
        }
        
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--primary);
            border-radius: var(--radius-full);
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .search-container {
            position: relative;
            width: 300px;
        }
        
        .search-input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 3rem;
            border: 2px solid var(--border-light);
            border-radius: var(--radius-full);
            font-size: 0.95rem;
            transition: all var(--transition-fast);
        }
        
        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(42, 75, 140, 0.1);
        }
        
        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            pointer-events: none;
        }
        
        .action-btn {
            position: relative;
            width: 2.5rem;
            height: 2.5rem;
            border: none;
            background: var(--bg-lighter);
            border-radius: var(--radius-full);
            color: var(--text-dark);
            cursor: pointer;
            transition: all var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .action-btn:hover {
            background: var(--primary);
            color: var(--text-white);
        }
        
        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            min-width: 20px;
            height: 20px;
            padding: 0 6px;
            background: var(--danger);
            color: var(--text-white);
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* ==================== ГЕРОЙ СЕКЦИЯ ==================== */
        .hero {
            margin-top: var(--header-height);
            padding: 6rem 0;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600" opacity="0.1"><path fill="%23ffffff" d="M0 0h1200v600H0z"/><circle cx="300" cy="300" r="150" fill="%23FF6B35"/><circle cx="900" cy="200" r="100" fill="%2300C9B7"/><circle cx="600" cy="500" r="120" fill="%233A6BC7"/></svg>');
            background-size: cover;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
            text-align: center;
            color: var(--text-white);
        }
        
        .hero-title {
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            color: var(--text-white);
        }
        
        .hero-subtitle {
            font-size: 1.5rem;
            font-weight: 300;
            margin-bottom: 2rem;
            opacity: 0.9;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .hero-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        /* ==================== КАТЕГОРИИ ==================== */
        .section {
            padding: 5rem 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }
        
        .section-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: var(--secondary);
            border-radius: var(--radius-full);
            margin: 1rem auto;
        }
        
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .category-card {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
            text-decoration: none;
            color: var(--text-dark);
        }
        
        .category-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
        }
        
        .category-image {
            height: 180px;
            background: linear-gradient(45deg, var(--primary-light), var(--accent-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-white);
            font-size: 3rem;
        }
        
        .category-content {
            padding: 1.5rem;
        }
        
        .category-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .category-count {
            font-size: 0.875rem;
            color: var(--text-light);
        }
        
        /* ==================== ТОВАРЫ ==================== */
        .products-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .products-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .sort-select {
            min-width: 200px;
        }
        
        .view-toggle {
            display: flex;
            background: var(--bg-lighter);
            border-radius: var(--radius-md);
            padding: 4px;
        }
        
        .view-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: transparent;
            border-radius: var(--radius-sm);
            color: var(--text-medium);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }
        
        .view-btn.active {
            background: var(--bg-white);
            color: var(--primary);
            box-shadow: var(--shadow-xs);
        }
        
        .product-card {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        
        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .product-badges {
            position: absolute;
            top: 1rem;
            left: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            z-index: 1;
        }
        
        .badge-new {
            background: var(--accent);
            color: var(--text-white);
        }
        
        .badge-sale {
            background: var(--secondary);
            color: var(--text-white);
        }
        
        .badge-hot {
            background: var(--danger);
            color: var(--text-white);
        }
        
        .badge-out {
            background: var(--text-light);
            color: var(--text-white);
        }
        
        .product-image {
            position: relative;
            height: 250px;
            overflow: hidden;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-slow);
        }
        
        .product-card:hover .product-image img {
            transform: scale(1.05);
        }
        
        .product-actions {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            opacity: 0;
            transform: translateX(20px);
            transition: all var(--transition-normal);
        }
        
        .product-card:hover .product-actions {
            opacity: 1;
            transform: translateX(0);
        }
        
        .action-btn-small {
            width: 36px;
            height: 36px;
            border: none;
            background: var(--bg-white);
            border-radius: var(--radius-full);
            color: var(--text-dark);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
            box-shadow: var(--shadow-sm);
        }
        
        .action-btn-small:hover {
            background: var(--primary);
            color: var(--text-white);
            transform: scale(1.1);
        }
        
        .product-content {
            padding: 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .product-category {
            font-size: 0.875rem;
            color: var(--text-light);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .product-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }
        
        .product-description {
            font-size: 0.875rem;
            color: var(--text-medium);
            margin-bottom: 1rem;
            flex-grow: 1;
        }
        
        .product-price {
            margin-top: auto;
        }
        
        .current-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .old-price {
            font-size: 1rem;
            color: var(--text-light);
            text-decoration: line-through;
            margin-left: 0.5rem;
        }
        
        .product-rating {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            margin-bottom: 0.75rem;
        }
        
        .rating-stars {
            color: var(--warning);
        }
        
        .rating-count {
            font-size: 0.875rem;
            color: var(--text-light);
        }
        
        .product-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-light);
        }
        
        .stock-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }
        
        .stock-indicator {
            width: 8px;
            height: 8px;
            border-radius: var(--radius-full);
        }
        
        .stock-in {
            background: var(--success);
        }
        
        .stock-low {
            background: var(--warning);
        }
        
        .stock-out {
            background: var(--danger);
        }
        
        /* ==================== КОРЗИНА ==================== */
        .cart-modal {
            display: none;
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            max-width: 400px;
            height: 100vh;
            background: var(--bg-white);
            box-shadow: var(--shadow-xl);
            z-index: 1100;
            flex-direction: column;
        }
        
        .cart-modal.active {
            display: flex;
        }
        
        .cart-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cart-title {
            font-size: 1.5rem;
            margin: 0;
        }
        
        .cart-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-light);
            cursor: pointer;
            transition: color var(--transition-fast);
        }
        
        .cart-close:hover {
            color: var(--danger);
        }
        
        .cart-body {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
        }
        
        .cart-empty {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--text-light);
        }
        
        .cart-empty-icon {
            font-size: 4rem;
            color: var(--border-light);
            margin-bottom: 1rem;
        }
        
        .cart-item {
            display: flex;
            gap: 1rem;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-light);
        }
        
        .cart-item:last-child {
            border-bottom: none;
        }
        
        .cart-item-image {
            width: 80px;
            height: 80px;
            border-radius: var(--radius-md);
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .cart-item-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .cart-item-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }
        
        .cart-item-price {
            color: var(--primary);
            font-weight: 600;
            margin-top: auto;
        }
        
        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .quantity-btn {
            width: 28px;
            height: 28px;
            border: 1px solid var(--border-light);
            background: var(--bg-white);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .quantity-btn:hover {
            background: var(--primary);
            color: var(--text-white);
            border-color: var(--primary);
        }
        
        .quantity-input {
            width: 40px;
            text-align: center;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-sm);
            padding: 0.25rem;
            font-size: 0.875rem;
        }
        
        .cart-item-remove {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            transition: color var(--transition-fast);
            padding: 0.25rem;
        }
        
        .cart-item-remove:hover {
            color: var(--danger);
        }
        
        .cart-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--border-light);
            background: var(--bg-lighter);
        }
        
        .cart-summary {
            margin-bottom: 1.5rem;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }
        
        .summary-total {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        /* ==================== АДМИН ПАНЕЛЬ ==================== */
        .admin-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1200;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .admin-modal.active {
            display: flex;
        }
        
        .admin-panel {
            background: var(--bg-white);
            border-radius: var(--radius-xl);
            width: 100%;
            max-width: 1200px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .admin-header {
            padding: 2rem;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            color: var(--text-white);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-header h2 {
            color: var(--text-white);
            margin: 0;
        }
        
        .admin-body {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
        }
        
        .admin-tabs {
            display: flex;
            border-bottom: 2px solid var(--border-light);
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .admin-tab {
            padding: 1rem 1.5rem;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            color: var(--text-medium);
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-bottom: -2px;
        }
        
        .admin-tab:hover {
            color: var(--primary);
        }
        
        .admin-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .admin-tab-content {
            display: none;
        }
        
        .admin-tab-content.active {
            display: block;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            border: 1px solid var(--border-light);
            transition: all var(--transition-normal);
        }
        
        .stat-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--text-white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            line-height: 1;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .products-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
        }
        
        .products-table th {
            background: var(--bg-lighter);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--text-dark);
            border-bottom: 2px solid var(--border-light);
        }
        
        .products-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-light);
            vertical-align: middle;
        }
        
        .products-table tr:hover {
            background: var(--bg-lighter);
        }
        
        .product-table-image {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-sm);
            overflow: hidden;
        }
        
        .product-table-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .status-available {
            background: var(--success-light);
            color: var(--success);
        }
        
        .status-low {
            background: var(--warning-light);
            color: var(--warning);
        }
        
        .status-out {
            background: var(--danger-light);
            color: var(--danger);
        }
        
        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }
        
        /* ==================== ФУТЕР ==================== */
        footer {
            background: var(--bg-dark);
            color: var(--text-white);
            padding: 4rem 0 2rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
            margin-bottom: 3rem;
        }
        
        .footer-section h3 {
            color: var(--text-white);
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 0.75rem;
        }
        
        .footer-links a {
            color: var(--text-light);
            text-decoration: none;
            transition: color var(--transition-fast);
        }
        
        .footer-links a:hover {
            color: var(--text-white);
        }
        
        .footer-bottom {
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            color: var(--text-light);
            font-size: 0.875rem;
        }
        
        /* ==================== УВЕДОМЛЕНИЯ ==================== */
        .notifications {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1300;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            max-width: 400px;
        }
        
        .notification {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow-lg);
            border-left: 4px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 1rem;
            transform: translateX(100%);
            opacity: 0;
            animation: slideInRight 0.3s ease forwards;
        }
        
        .notification.success {
            border-left-color: var(--success);
        }
        
        .notification.warning {
            border-left-color: var(--warning);
        }
        
        .notification.error {
            border-left-color: var(--danger);
        }
        
        .notification.info {
            border-left-color: var(--info);
        }
        
        .notification-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .notification-content {
            flex: 1;
        }
        
        .notification-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .notification-message {
            font-size: 0.875rem;
            color: var(--text-medium);
        }
        
        .notification-close {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 1.25rem;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color var(--transition-fast);
        }
        
        .notification-close:hover {
            color: var(--text-dark);
        }
        
        @keyframes slideInRight {
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* ==================== ЗАГРУЗЧИК ==================== */
        .loader-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(255, 255, 255, 0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1400;
        }
        
        .loader-overlay.active {
            display: flex;
        }
        
        .loader {
            width: 80px;
            height: 80px;
            border: 6px solid var(--border-light);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* ==================== АДАПТИВНОСТЬ ==================== */
        @media (max-width: 1200px) {
            .hero-title { font-size: 3.5rem; }
            .grid-4 { grid-template-columns: repeat(3, 1fr); }
        }
        
        @media (max-width: 992px) {
            .hero-title { font-size: 3rem; }
            .hero-subtitle { font-size: 1.25rem; }
            .grid-4 { grid-template-columns: repeat(2, 1fr); }
            .nav-menu { display: none; }
            .search-container { width: 250px; }
        }
        
        @media (max-width: 768px) {
            .hero { padding: 4rem 0; }
            .hero-title { font-size: 2.5rem; }
            .hero-subtitle { font-size: 1.125rem; }
            .section { padding: 3rem 0; }
            .grid-4 { grid-template-columns: 1fr; }
            .products-header { flex-direction: column; align-items: flex-start; }
            .search-container { width: 100%; }
            .header-actions { order: -1; width: 100%; justify-content: space-between; }
            .logo { order: 1; }
        }
        
        @media (max-width: 576px) {
            .hero-title { font-size: 2rem; }
            .hero-subtitle { font-size: 1rem; }
            .hero-actions { flex-direction: column; }
            .btn { width: 100%; }
            .container { padding: 0 1rem; }
            .header-container { padding: 0 1rem; }
        }
        
        /* ==================== УТИЛИТЫ ==================== */
        .mt-0 { margin-top: 0; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 0.75rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-5 { margin-top: 1.5rem; }
        .mt-6 { margin-top: 2rem; }
        .mt-8 { margin-top: 2.5rem; }
        .mt-10 { margin-top: 3rem; }
        
        .mb-0 { margin-bottom: 0; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-5 { margin-bottom: 1.5rem; }
        .mb-6 { margin-bottom: 2rem; }
        .mb-8 { margin-bottom: 2.5rem; }
        .mb-10 { margin-bottom: 3rem; }
        
        .p-0 { padding: 0; }
        .p-1 { padding: 0.25rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }
        .p-5 { padding: 1.5rem; }
        .p-6 { padding: 2rem; }
        .p-8 { padding: 2.5rem; }
        .p-10 { padding: 3rem; }
        
        .hidden { display: none; }
        .block { display: block; }
        .inline { display: inline; }
        .inline-block { display: inline-block; }
        
        .overflow-hidden { overflow: hidden; }
        .overflow-auto { overflow: auto; }
        .overflow-x-auto { overflow-x: auto; }
        .overflow-y-auto { overflow-y: auto; }
        
        .position-relative { position: relative; }
        .position-absolute { position: absolute; }
        .position-fixed { position: fixed; }
        .position-sticky { position: sticky; }
        
        .cursor-pointer { cursor: pointer; }
        .cursor-not-allowed { cursor: not-allowed; }
        
        .select-none { user-select: none; }
        .select-text { user-select: text; }
        
        .shadow-none { box-shadow: none; }
        .shadow-xs { box-shadow: var(--shadow-xs); }
        .shadow-sm { box-shadow: var(--shadow-sm); }
        .shadow-md { box-shadow: var(--shadow-md); }
        .shadow-lg { box-shadow: var(--shadow-lg); }
        .shadow-xl { box-shadow: var(--shadow-xl); }
        
        .rounded-none { border-radius: 0; }
        .rounded-sm { border-radius: var(--radius-sm); }
        .rounded-md { border-radius: var(--radius-md); }
        .rounded-lg { border-radius: var(--radius-lg); }
        .rounded-xl { border-radius: var(--radius-xl); }
        .rounded-full { border-radius: var(--radius-full); }
        
        .w-100 { width: 100%; }
        .w-auto { width: auto; }
        .h-100 { height: 100%; }
        .h-auto { height: auto; }
        
        .opacity-0 { opacity: 0; }
        .opacity-25 { opacity: 0.25; }
        .opacity-50 { opacity: 0.5; }
        .opacity-75 { opacity: 0.75; }
        .opacity-100 { opacity: 1; }
        
        .z-0 { z-index: 0; }
        .z-10 { z-index: 10; }
        .z-20 { z-index: 20; }
        .z-30 { z-index: 30; }
        .z-40 { z-index: 40; }
        .z-50 { z-index: 50; }
        .z-auto { z-index: auto; }
        
        /* ==================== КАСТОМНЫЕ СТИЛИ ==================== */
        .floating-buttons {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 100;
        }
        
        .floating-button {
            width: 56px;
            height: 56px;
            border-radius: var(--radius-full);
            border: none;
            background: var(--primary);
            color: var(--text-white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            transition: all var(--transition-normal);
        }
        
        .floating-button:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-xl);
        }
        
        .floating-button.secondary {
            background: var(--secondary);
        }
        
        .floating-button.accent {
            background: var(--accent);
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: 3rem;
        }
        
        .page-link {
            width: 40px;
            height: 40px;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-dark);
            text-decoration: none;
            transition: all var(--transition-fast);
        }
        
        .page-link:hover {
            background: var(--primary);
            color: var(--text-white);
            border-color: var(--primary);
        }
        
        .page-link.active {
            background: var(--primary);
            color: var(--text-white);
            border-color: var(--primary);
        }
        
        .back-to-top {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            width: 48px;
            height: 48px;
            background: var(--bg-white);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-full);
            display: none;
            align-items: center;
            justify-content: center;
            color: var(--text-dark);
            text-decoration: none;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
            z-index: 100;
        }
        
        .back-to-top:hover {
            background: var(--primary);
            color: var(--text-white);
            border-color: var(--primary);
            transform: translateY(-4px);
        }
        
        .back-to-top.active {
            display: flex;
        }
        
        /* ==================== СПЕЦИАЛЬНЫЕ ЭФФЕКТЫ ==================== */
        .parallax {
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hover-lift {
            transition: transform var(--transition-normal);
        }
        
        .hover-lift:hover {
            transform: translateY(-4px);
        }
        
        .hover-scale {
            transition: transform var(--transition-normal);
        }
        
        .hover-scale:hover {
            transform: scale(1.05);
        }
        
        .hover-glow {
            transition: box-shadow var(--transition-normal);
        }
        
        .hover-glow:hover {
            box-shadow: 0 0 20px rgba(67, 97, 238, 0.3);
        }
        
        /* ==================== АНИМАЦИИ ==================== */
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        .slide-up {
            animation: slideUp 0.5s ease;
        }
        
        .slide-down {
            animation: slideDown 0.5s ease;
        }
        
        .scale-in {
            animation: scaleIn 0.3s ease;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes scaleIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(67, 97, 238, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(67, 97, 238, 0); }
            100% { box-shadow: 0 0 0 0 rgba(67, 97, 238, 0); }
        }
        
        /* ==================== ДИНАМИЧЕСКИЕ КЛАССЫ ==================== */
        .dark-mode {
            --primary: #4A6FDC;
            --primary-light: #5D8AFF;
            --primary-dark: #3A56D4;
            --secondary: #FF8B5C;
            --secondary-light: #FFA685;
            --secondary-dark: #E55A2B;
            --accent: #2DE5D0;
            --accent-light: #5DFFEC;
            --accent-dark: #00A896;
            
            --text-dark: #F0F0F0;
            --text-medium: #CCCCCC;
            --text-light: #999999;
            --text-white: #FFFFFF;
            
            --bg-white: #1A1A2E;
            --bg-light: #16213E;
            --bg-lighter: #0F0F1A;
            --bg-dark: #0A0A14;
            --bg-darker: #050509;
            
            --border-light: #2D3748;
            --border-medium: #4A5568;
            --border-dark: #718096;
        }
        
        .high-contrast {
            --primary: #0000FF;
            --secondary: #FF0000;
            --accent: #00FF00;
            --text-dark: #000000;
            --bg-white: #FFFFFF;
            --border-light: #000000;
        }
        
        /* ==================== ПРОГРЕСС БАР ==================== */
        .progress {
            height: 8px;
            background: var(--bg-lighter);
            border-radius: var(--radius-full);
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: var(--radius-full);
            transition: width 0.3s ease;
        }
        
        /* ==================== ТАБЫ ==================== */
        .tabs {
            border-bottom: 2px solid var(--border-light);
            margin-bottom: 2rem;
        }
        
        .tab-list {
            display: flex;
            gap: 2rem;
        }
        
        .tab {
            padding: 1rem 0;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            color: var(--text-medium);
            cursor: pointer;
            transition: all var(--transition-fast);
            margin-bottom: -2px;
        }
        
        .tab:hover {
            color: var(--primary);
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* ==================== АККОРДЕОН ==================== */
        .accordion {
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            overflow: hidden;
        }
        
        .accordion-item {
            border-bottom: 1px solid var(--border-light);
        }
        
        .accordion-item:last-child {
            border-bottom: none;
        }
        
        .accordion-header {
            padding: 1.5rem;
            background: var(--bg-lighter);
            border: none;
            width: 100%;
            text-align: left;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            color: var(--text-dark);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all var(--transition-fast);
        }
        
        .accordion-header:hover {
            background: var(--border-light);
        }
        
        .accordion-header.active {
            background: var(--primary);
            color: var(--text-white);
        }
        
        .accordion-icon {
            transition: transform var(--transition-fast);
        }
        
        .accordion-header.active .accordion-icon {
            transform: rotate(180deg);
        }
        
        .accordion-content {
            padding: 1.5rem;
            display: none;
            background: var(--bg-white);
        }
        
        .accordion-content.active {
            display: block;
        }
        
        /* ==================== ТОСТЫ ==================== */
        .toast-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1300;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-width: 400px;
        }
        
        .toast {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow-xl);
            border-left: 4px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 1rem;
            transform: translateY(100%);
            opacity: 0;
            animation: slideUpToast 0.3s ease forwards;
        }
        
        @keyframes slideUpToast {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        /* ==================== ИНСТРУМЕНТЫ ==================== */
        .tooltip {
            position: relative;
        }
        
        .tooltip-text {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-dark);
            color: var(--text-white);
            padding: 0.5rem 1rem;
            border-radius: var(--radius-sm);
            font-size: 0.875rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all var(--transition-fast);
            z-index: 1000;
        }
        
        .tooltip:hover .tooltip-text {
            opacity: 1;
            visibility: visible;
        }
        
        /* ==================== ДИАГРАММЫ ==================== */
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        /* ==================== ЛЕНТА ЗАГРУЗКИ ==================== */
        .skeleton {
            background: linear-gradient(90deg, var(--bg-lighter) 25%, var(--border-light) 50%, var(--bg-lighter) 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: var(--radius-md);
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* ==================== МОДАЛЬНЫЕ ОКНА ==================== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1100;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--bg-white);
            border-radius: var(--radius-xl);
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow: auto;
            animation: scaleIn 0.3s ease;
        }
        
        .modal-header {
            padding: 2rem 2rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-body {
            padding: 1rem 2rem;
        }
        
        .modal-footer {
            padding: 1rem 2rem 2rem;
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        
        /* ==================== КАРУСЕЛЬ ==================== */
        .carousel {
            position: relative;
            overflow: hidden;
            border-radius: var(--radius-lg);
        }
        
        .carousel-track {
            display: flex;
            transition: transform var(--transition-slow);
        }
        
        .carousel-slide {
            min-width: 100%;
            position: relative;
        }
        
        .carousel-controls {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            transform: translateY(-50%);
            display: flex;
            justify-content: space-between;
            padding: 0 1rem;
            pointer-events: none;
        }
        
        .carousel-btn {
            pointer-events: all;
            width: 48px;
            height: 48px;
            border-radius: var(--radius-full);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            color: var(--text-dark);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }
        
        .carousel-btn:hover {
            background: var(--bg-white);
            transform: scale(1.1);
        }
        
        .carousel-dots {
            position: absolute;
            bottom: 1rem;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .carousel-dot {
            width: 12px;
            height: 12px;
            border-radius: var(--radius-full);
            background: rgba(255, 255, 255, 0.5);
            border: none;
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .carousel-dot.active {
            background: var(--text-white);
            transform: scale(1.2);
        }
        
        /* ==================== ИНФОГРАФИКА ==================== */
        .infographic {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 2rem;
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
        }
        
        .infographic:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .infographic-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-white);
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }
        
        .infographic-value {
            font-size: 3rem;
            font-weight: 800;
            color: var(--primary);
            line-height: 1;
            margin-bottom: 0.5rem;
        }
        
        .infographic-label {
            font-size: 1rem;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* ==================== ТАЙМЛАЙН ==================== */
        .timeline {
            position: relative;
            padding-left: 2rem;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border-light);
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 2rem;
            padding-left: 2rem;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1.5rem;
            top: 0;
            width: 1rem;
            height: 1rem;
            background: var(--primary);
            border-radius: var(--radius-full);
            border: 3px solid var(--bg-white);
        }
        
        .timeline-date {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .timeline-content {
            background: var(--bg-white);
            border-radius: var(--radius-md);
            padding: 1rem;
            box-shadow: var(--shadow-sm);
        }
        
        /* ==================== ЦЕНЫ ==================== */
        .pricing-table {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .pricing-card {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
            position: relative;
        }
        
        .pricing-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
        }
        
        .pricing-card.featured {
            border: 2px solid var(--primary);
            transform: scale(1.05);
        }
        
        .pricing-card.featured:hover {
            transform: scale(1.05) translateY(-8px);
        }
        
        .pricing-header {
            padding: 2rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--text-white);
            text-align: center;
        }
        
        .pricing-title {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--text-white);
        }
        
        .pricing-price {
            font-size: 3rem;
            font-weight: 800;
            line-height: 1;
        }
        
        .pricing-period {
            font-size: 1rem;
            opacity: 0.9;
        }
        
        .pricing-body {
            padding: 2rem;
        }
        
        .pricing-features {
            list-style: none;
            margin-bottom: 2rem;
        }
        
        .pricing-features li {
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .pricing-features i {
            color: var(--success);
        }
        
        .pricing-footer {
            padding: 0 2rem 2rem;
            text-align: center;
        }
        
        /* ==================== КОМАНДА ==================== */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .team-card {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
            text-align: center;
        }
        
        .team-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .team-image {
            height: 250px;
            background: linear-gradient(45deg, var(--primary-light), var(--accent-light));
            position: relative;
            overflow: hidden;
        }
        
        .team-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-slow);
        }
        
        .team-card:hover .team-image img {
            transform: scale(1.05);
        }
        
        .team-content {
            padding: 1.5rem;
        }
        
        .team-name {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .team-position {
            color: var(--primary);
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1rem;
        }
        
        .team-social {
            display: flex;
            justify-content: center;
            gap: 0.75rem;
        }
        
        .social-link {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-full);
            background: var(--bg-lighter);
            color: var(--text-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-fast);
        }
        
        .social-link:hover {
            background: var(--primary);
            color: var(--text-white);
            transform: scale(1.1);
        }
        
        /* ==================== ОТЗЫВЫ ==================== */
        .testimonials {
            position: relative;
        }
        
        .testimonial-card {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
            margin: 1rem;
        }
        
        .testimonial-content {
            font-size: 1.125rem;
            font-style: italic;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .testimonial-author {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .author-image {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-full);
            overflow: hidden;
        }
        
        .author-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .author-info h4 {
            margin: 0;
            font-size: 1.125rem;
        }
        
        .author-position {
            color: var(--text-light);
            font-size: 0.875rem;
        }
        
        /* ==================== ЧАСТО ЗАДАВАЕМЫЕ ВОПРОСЫ ==================== */
        .faq-section {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .faq-item {
            margin-bottom: 1rem;
        }
        
        .faq-question {
            width: 100%;
            padding: 1.5rem;
            background: var(--bg-white);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            text-align: left;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            color: var(--text-dark);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all var(--transition-fast);
        }
        
        .faq-question:hover {
            border-color: var(--primary);
        }
        
        .faq-question.active {
            background: var(--primary);
            color: var(--text-white);
            border-color: var(--primary);
        }
        
        .faq-answer {
            padding: 1.5rem;
            background: var(--bg-white);
            border: 1px solid var(--border-light);
            border-top: none;
            border-radius: 0 0 var(--radius-md) var(--radius-md);
            display: none;
        }
        
        .faq-answer.active {
            display: block;
        }
        
        /* ==================== ГАЛЕРЕЯ ==================== */
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .gallery-item {
            position: relative;
            border-radius: var(--radius-md);
            overflow: hidden;
            cursor: pointer;
        }
        
        .gallery-item img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform var(--transition-slow);
        }
        
        .gallery-item:hover img {
            transform: scale(1.05);
        }
        
        .gallery-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity var(--transition-normal);
        }
        
        .gallery-item:hover .gallery-overlay {
            opacity: 1;
        }
        
        .gallery-icon {
            width: 48px;
            height: 48px;
            background: var(--text-white);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-dark);
            font-size: 1.5rem;
            transform: scale(0.8);
            transition: all var(--transition-normal);
        }
        
        .gallery-item:hover .gallery-icon {
            transform: scale(1);
        }
        
        /* ==================== КОНТАКТЫ ==================== */
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
        }
        
        .contact-info {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .contact-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .contact-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-white);
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .contact-form {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .map-container {
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }
        
        /* ==================== ПОДПИСКА ==================== */
        .subscribe {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            padding: 4rem 2rem;
            border-radius: var(--radius-xl);
            text-align: center;
            color: var(--text-white);
        }
        
        .subscribe-form {
            max-width: 600px;
            margin: 2rem auto 0;
            display: flex;
            gap: 1rem;
        }
        
        @media (max-width: 768px) {
            .subscribe-form {
                flex-direction: column;
            }
        }
        
        /* ==================== 404 ==================== */
        .error-page {
            text-align: center;
            padding: 6rem 2rem;
        }
        
        .error-code {
            font-size: 8rem;
            font-weight: 800;
            color: var(--primary);
            line-height: 1;
            margin-bottom: 1rem;
        }
        
        .error-message {
            font-size: 1.5rem;
            margin-bottom: 2rem;
        }
        
        /* ==================== ТЕМЫ ==================== */
        .theme-switcher {
            position: fixed;
            top: 100px;
            right: 2rem;
            z-index: 100;
        }
        
        .theme-btn {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-full);
            background: var(--bg-white);
            border: 2px solid var(--border-light);
            color: var(--text-dark);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
        }
        
        .theme-btn:hover {
            transform: rotate(45deg);
            box-shadow: var(--shadow-lg);
        }
        
        /* ==================== ЯЗЫКОВОЙ ПЕРЕКЛЮЧАТЕЛЬ ==================== */
        .language-switcher {
            position: relative;
        }
        
        .language-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: none;
            border: none;
            color: var(--text-dark);
            cursor: pointer;
            font-family: 'Roboto', sans-serif;
            font-size: 1rem;
            padding: 0.5rem;
        }
        
        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--bg-white);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            min-width: 150px;
            display: none;
            z-index: 100;
        }
        
        .language-dropdown.active {
            display: block;
        }
        
        .language-item {
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            color: var(--text-dark);
            transition: all var(--transition-fast);
        }
        
        .language-item:hover {
            background: var(--bg-lighter);
        }
        
        /* ==================== СОРТИРОВКА ==================== */
        .sort-dropdown {
            position: relative;
        }
        
        .sort-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--bg-white);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-md);
            padding: 0.75rem 1rem;
            color: var(--text-dark);
            cursor: pointer;
            font-family: 'Roboto', sans-serif;
            font-size: 1rem;
            min-width: 200px;
        }
        
        .sort-dropdown-content {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--bg-white);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            display: none;
            z-index: 100;
        }
        
        .sort-dropdown-content.active {
            display: block;
        }
        
        .sort-item {
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            color: var(--text-dark);
            transition: all var(--transition-fast);
            cursor: pointer;
        }
        
        .sort-item:hover {
            background: var(--bg-lighter);
        }
        
        /* ==================== ФИЛЬТРЫ ==================== */
        .filters {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
            margin-bottom: 2rem;
        }
        
        .filter-group {
            margin-bottom: 1.5rem;
        }
        
        .filter-title {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-dark);
        }
        
        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .filter-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .filter-option input {
            width: 1.25rem;
            height: 1.25rem;
        }
        
        .filter-option label {
            cursor: pointer;
        }
        
        .price-range {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .price-input {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-sm);
        }
        
        /* ==================== ХЛЕБНЫЕ КРОШКИ ==================== */
        .breadcrumbs {
            padding: 1rem 0;
            margin-bottom: 2rem;
        }
        
        .breadcrumbs-list {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .breadcrumbs-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .breadcrumbs-item:not(:last-child)::after {
            content: '/';
            color: var(--text-light);
        }
        
        .breadcrumbs-link {
            color: var(--text-medium);
            text-decoration: none;
            transition: color var(--transition-fast);
        }
        
        .breadcrumbs-link:hover {
            color: var(--primary);
        }
        
        .breadcrumbs-current {
            color: var(--text-dark);
            font-weight: 600;
        }
        
        /* ==================== СТЕППЕР ==================== */
        .stepper {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 3rem;
            position: relative;
        }
        
        .stepper::before {
            content: '';
            position: absolute;
            top: 1.5rem;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--border-light);
            z-index: 1;
        }
        
        .step {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            flex: 1;
        }
        
        .step-number {
            width: 3rem;
            height: 3rem;
            border-radius: var(--radius-full);
            background: var(--bg-white);
            border: 2px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 0.5rem;
            transition: all var(--transition-normal);
        }
        
        .step.active .step-number {
            background: var(--primary);
            border-color: var(--primary);
            color: var(--text-white);
        }
        
        .step.completed .step-number {
            background: var(--success);
            border-color: var(--success);
            color: var(--text-white);
        }
        
        .step-label {
            font-size: 0.875rem;
            color: var(--text-light);
            transition: color var(--transition-fast);
        }
        
        .step.active .step-label {
            color: var(--primary);
            font-weight: 600;
        }
        
        /* ==================== ЧЕКБОКС ==================== */
        .checkout {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .order-summary {
            background: var(--bg-lighter);
            border-radius: var(--radius-lg);
            padding: 2rem;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-light);
        }
        
        .order-total {
            display: flex;
            justify-content: space-between;
            padding: 1rem 0;
            font-weight: 700;
            font-size: 1.25rem;
        }
        
        /* ==================== ПРОФИЛЬ ==================== */
        .profile {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 3rem;
        }
        
        .profile-sidebar {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .profile-avatar {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .profile-avatar img {
            width: 120px;
            height: 120px;
            border-radius: var(--radius-full);
            object-fit: cover;
            margin-bottom: 1rem;
        }
        
        .profile-nav {
            list-style: none;
        }
        
        .profile-nav li {
            margin-bottom: 0.5rem;
        }
        
        .profile-nav a {
            display: block;
            padding: 0.75rem 1rem;
            border-radius: var(--radius-md);
            color: var(--text-dark);
            text-decoration: none;
            transition: all var(--transition-fast);
        }
        
        .profile-nav a:hover,
        .profile-nav a.active {
            background: var(--bg-lighter);
            color: var(--primary);
        }
        
        .profile-content {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        /* ==================== НАСТРОЙКИ ==================== */
        .settings {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .settings-group {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .settings-title {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-light);
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-light);
        }
        
        .setting-item:last-child {
            border-bottom: none;
        }
        
        .setting-label {
            font-weight: 500;
        }
        
        /* ==================== ПЕРЕКЛЮЧАТЕЛЬ ==================== */
        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--border-light);
            transition: .4s;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background: var(--bg-white);
            transition: .4s;
        }
        
        input:checked + .slider {
            background: var(--primary);
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        .slider.round {
            border-radius: 34px;
        }
        
        .slider.round:before {
            border-radius: 50%;
        }
        
        /* ==================== КУПОН ==================== */
        .coupon {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .coupon-input {
            flex: 1;
        }
        
        /* ==================== ГАРАНТИИ ==================== */
        .guarantees {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .guarantee-card {
            text-align: center;
            padding: 2rem;
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
        }
        
        .guarantee-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .guarantee-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        /* ==================== ИСТОРИЯ ЗАКАЗОВ ==================== */
        .orders-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .orders-table th {
            background: var(--bg-lighter);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--text-dark);
            border-bottom: 2px solid var(--border-light);
        }
        
        .orders-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-light);
            vertical-align: middle;
        }
        
        .order-status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-pending {
            background: var(--warning-light);
            color: var(--warning);
        }
        
        .status-processing {
            background: var(--info-light);
            color: var(--info);
        }
        
        .status-shipped {
            background: var(--accent-light);
            color: var(--accent-dark);
        }
        
        .status-delivered {
            background: var(--success-light);
            color: var(--success);
        }
        
        .status-cancelled {
            background: var(--danger-light);
            color: var(--danger);
        }
        
        /* ==================== ИЗБРАННОЕ ==================== */
        .wishlist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        /* ==================== СРАВНЕНИЕ ==================== */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
        }
        
        .comparison-table th,
        .comparison-table td {
            padding: 1rem;
            border: 1px solid var(--border-light);
            text-align: center;
        }
        
        .comparison-table th {
            background: var(--bg-lighter);
            font-weight: 600;
        }
        
        /* ==================== БЛОГ ==================== */
        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .blog-card {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-normal);
        }
        
        .blog-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .blog-image {
            height: 200px;
            overflow: hidden;
        }
        
        .blog-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-slow);
        }
        
        .blog-card:hover .blog-image img {
            transform: scale(1.05);
        }
        
        .blog-content {
            padding: 1.5rem;
        }
        
        .blog-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            color: var(--text-light);
        }
        
        .blog-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }
        
        .blog-excerpt {
            color: var(--text-medium);
            margin-bottom: 1rem;
        }
        
        .blog-read-more {
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        /* ==================== КОММЕНТАРИИ ==================== */
        .comments {
            margin-top: 3rem;
        }
        
        .comment {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-xs);
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .comment-author {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .comment-author img {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-full);
            object-fit: cover;
        }
        
        .comment-date {
            color: var(--text-light);
            font-size: 0.875rem;
        }
        
        .comment-form {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        /* ==================== РЕЙТИНГ ==================== */
        .rating {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .rating-overview {
            display: flex;
            align-items: center;
            gap: 2rem;
        }
        
        .rating-average {
            text-align: center;
        }
        
        .rating-average-value {
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .rating-stars {
            color: var(--warning);
        }
        
        .rating-bars {
            flex: 1;
        }
        
        .rating-bar {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 0.5rem;
        }
        
        .rating-bar-label {
            width: 80px;
            font-size: 0.875rem;
            color: var(--text-light);
        }
        
        .rating-bar-track {
            flex: 1;
            height: 8px;
            background: var(--bg-lighter);
            border-radius: var(--radius-full);
            overflow: hidden;
        }
        
        .rating-bar-fill {
            height: 100%;
            background: var(--warning);
            border-radius: var(--radius-full);
        }
        
        /* ==================== ВОПРОСЫ И ОТВЕТЫ ==================== */
        .qa-section {
            margin-top: 3rem;
        }
        
        .qa-item {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow-xs);
        }
        
        .qa-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }
        
        .qa-answer {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-light);
            display: none;
        }
        
        .qa-answer.active {
            display: block;
        }
        
        /* ==================== СВОЙСТВА ТОВАРА ==================== */
        .specifications {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
        }
        
        .specifications tr:nth-child(even) {
            background: var(--bg-lighter);
        }
        
        .specifications th,
        .specifications td {
            padding: 1rem;
            border: 1px solid var(--border-light);
        }
        
        .specifications th {
            background: var(--bg-lighter);
            font-weight: 600;
            text-align: left;
            width: 200px;
        }
        
        /* ==================== ПАГИНАЦИЯ ==================== */
        .pagination-wrapper {
            display: flex;
            justify-content: center;
            margin-top: 3rem;
        }
        
        /* ==================== МИНИАТЮРЫ ==================== */
        .thumbnails {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
        
        .thumbnail {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-sm);
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all var(--transition-fast);
        }
        
        .thumbnail.active {
            border-color: var(--primary);
        }
        
        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* ==================== КОЛИЧЕСТВО ==================== */
        .quantity {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .quantity-btn {
            width: 36px;
            height: 36px;
            border: 1px solid var(--border-light);
            background: var(--bg-white);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .quantity-btn:hover {
            background: var(--primary);
            color: var(--text-white);
            border-color: var(--primary);
        }
        
        .quantity-input {
            width: 60px;
            text-align: center;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-sm);
            padding: 0.5rem;
            font-size: 1rem;
        }
        
        /* ==================== ДОСТАВКА ==================== */
        .shipping-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .shipping-option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .shipping-option:hover {
            border-color: var(--primary);
        }
        
        .shipping-option.active {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.05);
        }
        
        .shipping-option input {
            width: 20px;
            height: 20px;
        }
        
        /* ==================== ОПЛАТА ==================== */
        .payment-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .payment-option {
            text-align: center;
            padding: 1rem;
            border: 2px solid var(--border-light);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .payment-option:hover {
            border-color: var(--primary);
        }
        
        .payment-option.active {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.05);
        }
        
        .payment-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--text-light);
        }
        
        /* ==================== СЧЕТ ==================== */
        .invoice {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .invoice-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid var(--border-light);
        }
        
        .invoice-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
        }
        
        .invoice-table th,
        .invoice-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border-light);
            text-align: left;
        }
        
        .invoice-table th {
            background: var(--bg-lighter);
            font-weight: 600;
        }
        
        .invoice-total {
            text-align: right;
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        /* ==================== ЧАТ ==================== */
        .chat-widget {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 100;
        }
        
        .chat-button {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-full);
            background: var(--primary);
            color: var(--text-white);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: var(--shadow-lg);
            transition: all var(--transition-normal);
        }
        
        .chat-button:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-xl);
        }
        
        .chat-window {
            position: fixed;
            bottom: 80px;
            right: 2rem;
            width: 350px;
            height: 500px;
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            display: none;
            flex-direction: column;
            z-index: 100;
        }
        
        .chat-window.active {
            display: flex;
        }
        
        .chat-header {
            padding: 1rem;
            background: var(--primary);
            color: var(--text-white);
            border-radius: var(--radius-lg) var(--radius-lg) 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-body {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .chat-message {
            max-width: 80%;
            padding: 0.75rem 1rem;
            border-radius: var(--radius-lg);
        }
        
        .message-in {
            background: var(--bg-lighter);
            align-self: flex-start;
        }
        
        .message-out {
            background: var(--primary);
            color: var(--text-white);
            align-self: flex-end;
        }
        
        .chat-footer {
            padding: 1rem;
            border-top: 1px solid var(--border-light);
        }
        
        .chat-input {
            display: flex;
            gap: 0.5rem;
        }
        
        /* ==================== ПОДДЕРЖКА ==================== */
        .support-tickets {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .ticket {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-xs);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .ticket:hover {
            box-shadow: var(--shadow-sm);
        }
        
        .ticket-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .ticket-status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .ticket-priority {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 0.5rem;
        }
        
        .priority-high {
            background: var(--danger-light);
            color: var(--danger);
        }
        
        .priority-medium {
            background: var(--warning-light);
            color: var(--warning);
        }
        
        .priority-low {
            background: var(--info-light);
            color: var(--info);
        }
        
        /* ==================== УВЕДОМЛЕНИЯ ==================== */
        .alerts {
            position: fixed;
            top: 100px;
            right: 2rem;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-width: 400px;
        }
        
        .alert {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow-lg);
            border-left: 4px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 1rem;
            transform: translateX(100%);
            opacity: 0;
            animation: slideInRight 0.3s ease forwards;
        }
        
        .alert-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        
        .alert-content {
            flex: 1;
        }
        
        .alert-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .alert-message {
            font-size: 0.875rem;
            color: var(--text-medium);
        }
        
        .alert-close {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 1.25rem;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color var(--transition-fast);
        }
        
        .alert-close:hover {
            color: var(--text-dark);
        }
        
        /* ==================== ИНСТРУКЦИИ ==================== */
        .instructions {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .instruction-step {
            display: flex;
            align-items: flex-start;
            gap: 1.5rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--border-light);
        }
        
        .instruction-step:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .step-number-circle {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-full);
            background: var(--primary);
            color: var(--text-white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        .instruction-content h3 {
            margin-top: 0;
        }
        
        /* ==================== РЕСУРСЫ ==================== */
        .resources {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .resource-card {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
            text-align: center;
            transition: all var(--transition-normal);
            text-decoration: none;
            color: inherit;
        }
        
        .resource-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .resource-icon {
            font-size: 3rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .resource-title {
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }
        
        /* ==================== КАЛЬКУЛЯТОР ==================== */
        .calculator {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
            max-width: 500px;
            margin: 0 auto;
        }
        
        .calculator-display {
            background: var(--bg-lighter);
            border-radius: var(--radius-md);
            padding: 1rem;
            margin-bottom: 1rem;
            text-align: right;
            font-size: 2rem;
            font-family: monospace;
            min-height: 60px;
        }
        
        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
        }
        
        .calc-btn {
            padding: 1rem;
            border: none;
            border-radius: var(--radius-md);
            background: var(--bg-lighter);
            font-size: 1.25rem;
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .calc-btn:hover {
            background: var(--primary);
            color: var(--text-white);
        }
        
        .calc-btn.operator {
            background: var(--secondary);
            color: var(--text-white);
        }
        
        .calc-btn.equals {
            background: var(--primary);
            color: var(--text-white);
        }
        
        /* ==================== ИГРА ==================== */
        .game-container {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
            text-align: center;
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(3, 100px);
            grid-template-rows: repeat(3, 100px);
            gap: 5px;
            margin: 2rem auto;
        }
        
        .game-cell {
            background: var(--bg-lighter);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .game-cell:hover {
            background: var(--border-light);
        }
        
        .game-status {
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }
        
        /* ==================== ВИДЖЕТЫ ==================== */
        .widgets {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .widget {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-sm);
        }
        
        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .widget-title {
            font-size: 1.125rem;
            margin: 0;
        }
        
        .widget-content {
            /* Содержимое виджета */
        }
        
        /* ==================== ДАШБОРД ==================== */
        .dashboard {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 2rem;
            min-height: calc(100vh - var(--header-height));
        }
        
        .dashboard-sidebar {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .dashboard-nav {
            list-style: none;
        }
        
        .dashboard-nav li {
            margin-bottom: 0.5rem;
        }
        
        .dashboard-nav a {
            display: block;
            padding: 0.75rem 1rem;
            border-radius: var(--radius-md);
            color: var(--text-dark);
            text-decoration: none;
            transition: all var(--transition-fast);
        }
        
        .dashboard-nav a:hover,
        .dashboard-nav a.active {
            background: var(--bg-lighter);
            color: var(--primary);
        }
        
        .dashboard-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        /* ==================== ОТЧЕТЫ ==================== */
        .reports {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .report-card {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .report-title {
            font-size: 1.25rem;
            margin: 0;
        }
        
        .report-chart {
            height: 200px;
            margin-top: 1rem;
        }
        
        /* ==================== ЭКСПОРТ ==================== */
        .export-options {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        /* ==================== ИМПОРТ ==================== */
        .import-box {
            background: var(--bg-white);
            border: 2px dashed var(--border-light);
            border-radius: var(--radius-lg);
            padding: 3rem 2rem;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-normal);
        }
        
        .import-box:hover {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.05);
        }
        
        .import-icon {
            font-size: 3rem;
            color: var(--text-light);
            margin-bottom: 1rem;
        }
        
        /* ==================== АНАЛИТИКА ==================== */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .analytics-card {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        /* ==================== НАСТРОЙКИ САЙТА ==================== */
        .site-settings {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        /* ==================== РЕЗЕРВНОЕ КОПИРОВАНИЕ ==================== */
        .backup-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .backup-option {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }
        
        .backup-option:hover {
            border-color: var(--primary);
        }
        
        .backup-option.active {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.05);
        }
        
        /* ==================== ВОССТАНОВЛЕНИЕ ==================== */
        .restore-points {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .restore-point {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
        }
        
        /* ==================== ОБНОВЛЕНИЯ ==================== */
        .updates-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .update-item {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            box-shadow: var(--shadow-xs);
        }
        
        .update-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .update-version {
            font-weight: 600;
            color: var(--primary);
        }
        
        .update-date {
            color: var(--text-light);
            font-size: 0.875rem;
        }
        
        /* ==================== ЛИЦЕНЗИЯ ==================== */
        .license-info {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .license-key {
            font-family: monospace;
            background: var(--bg-lighter);
            padding: 1rem;
            border-radius: var(--radius-md);
            margin: 1rem 0;
            word-break: break-all;
        }
        
        /* ==================== О ПРОЕКТЕ ==================== */
        .about-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .about-section {
            margin-bottom: 3rem;
        }
        
        .team-members {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .team-member {
            text-align: center;
        }
        
        .team-member img {
            width: 120px;
            height: 120px;
            border-radius: var(--radius-full);
            object-fit: cover;
            margin-bottom: 1rem;
        }
        
        /* ==================== ПОМОЩЬ ==================== */
        .help-search {
            max-width: 600px;
            margin: 0 auto 3rem;
        }
        
        .help-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        /* ==================== ДОКУМЕНТАЦИЯ ==================== */
        .documentation {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 3rem;
        }
        
        .docs-nav {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 100px;
        }
        
        .docs-content {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        /* ==================== КОНТАКТНАЯ ФОРМА ==================== */
        .contact-form-container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* ==================== РЕКВИЗИТЫ ==================== */
        .requisites {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .requisites-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .requisites-table td {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-light);
        }
        
        .requisites-table td:first-child {
            font-weight: 600;
            width: 200px;
        }
        
        /* ==================== КАРТА САЙТА ==================== */
        .sitemap {
            background: var(--bg-white);
            border-radius: var(--radius-lg);
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        
        .sitemap-section {
            margin-bottom: 2rem;
        }
        
        .sitemap-links {
            columns: 3;
            column-gap: 2rem;
        }
        
        .sitemap-links li {
            margin-bottom: 0.5rem;
            break-inside: avoid;
        }
        
        @media (max-width: 992px) {
            .sitemap-links {
                columns: 2;
            }
        }
        
        @media (max-width: 576px) {
            .sitemap-links {
                columns: 1;
            }
        }
        
        /* ==================== 500 СТРОК CSS ЗАВЕРШЕНЫ ==================== */
    </style>
</head>
<body>
    <!-- Код HTML будет здесь -->
    <script>
        // ==================== КОНФИГУРАЦИЯ ====================
        const CONFIG = {
            GOOGLE_SHEETS: {
                URL: 'https://docs.google.com/spreadsheets/d/1udzmDOhQVIUf86IM2GXUFfYm_oOoTlGl6doZdImPr-s/edit?gid=73523831#gid=73523831',
                EXPORT_URL: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ6bWQ6XwB7Y8VQzQ6XwB7Y8VQzQ6XwB7Y8VQzQ6XwB7Y8VQz/pub?output=csv',
                SHEET_ID: '1udzmDOhQVIUf86IM2GXUFfYm_oOoTlGl6doZdImPr-s',
                GID: '73523831'
            },
            GITHUB: {
                CSV_URL: 'https://raw.githubusercontent.com/prodtorgbarnaul-coder/my-shop1/main/products_final.csv',
                REPO_URL: 'https://github.com/prodtorgbarnaul-coder/my-shop1'
            },
            APP: {
                NAME: 'PRODTORG',
                VERSION: '2.0.0',
                AUTHOR: 'prodtorgbarnaul-coder',
                YEAR: new Date().getFullYear()
            }
        };

        // ==================== ГЛОБАЛЬНЫЕ ПЕРЕМЕННЫЕ ====================
        let products = [];
        let categories = [];
        let cart = [];
        let wishlist = [];
        let orders = [];
        let currentUser = null;
        let isAdmin = false;
        let currentView = 'grid';
        let currentSort = 'default';
        let currentPage = 1;
        const itemsPerPage = 12;

        // ==================== КЛАССЫ ====================
        class Product {
            constructor(data) {
                this.id = data.id || this.generateId();
                this.sku = data.sku || '';
                this.name = data.name || 'Без названия';
                this.category = data.category || 'Без категории';
                this.subcategory = data.subcategory || '';
                this.brand = data.brand || '';
                this.price = parseFloat(data.price) || 0;
                this.oldPrice = parseFloat(data.oldPrice) || 0;
                this.cost = parseFloat(data.cost) || 0;
                this.quantity = parseInt(data.quantity) || 0;
                this.minQuantity = parseInt(data.minQuantity) || 1;
                this.weight = parseFloat(data.weight) || 0;
                this.dimensions = data.dimensions || '';
                this.color = data.color || '';
                this.size = data.size || '';
                this.material = data.material || '';
                this.description = data.description || '';
                this.shortDescription = data.shortDescription || '';
                this.features = data.features || [];
                this.specifications = data.specifications || {};
                this.images = Array.isArray(data.images) ? data.images : [data.image || ''];
                this.video = data.video || '';
                this.rating = parseFloat(data.rating) || 0;
                this.reviewsCount = parseInt(data.reviewsCount) || 0;
                this.views = parseInt(data.views) || 0;
                this.sales = parseInt(data.sales) || 0;
                this.status = data.status || 'draft';
                this.tags = Array.isArray(data.tags) ? data.tags : (data.tags ? data.tags.split(',') : []);
                this.metaTitle = data.metaTitle || '';
                this.metaDescription = data.metaDescription || '';
                this.metaKeywords = data.metaKeywords || '';
                this.seoUrl = data.seoUrl || this.generateSeoUrl();
                this.createdAt = data.createdAt || new Date().toISOString();
                this.updatedAt = data.updatedAt || new Date().toISOString();
                this.publishedAt = data.publishedAt || null;
                this.expiresAt = data.expiresAt || null;
                this.createdBy = data.createdBy || '';
                this.updatedBy = data.updatedBy || '';
                this.supplier = data.supplier || '';
                this.supplierCode = data.supplierCode || '';
                this.barcode = data.barcode || '';
                this.manufacturer = data.manufacturer || '';
                this.country = data.country || '';
                this.warranty = data.warranty || '';
                this.shipping = data.shipping || {};
                this.tax = data.tax || {};
                this.discounts = data.discounts || [];
                this.variants = data.variants || [];
                this.relatedProducts = data.relatedProducts || [];
                this.upsellProducts = data.upsellProducts || [];
                this.crossSellProducts = data.crossSellProducts || [];
                this.accessories = data.accessories || [];
                this.compatibility = data.compatibility || [];
                this.downloads = data.downloads || [];
                this.attributes = data.attributes || {};
                this.customFields = data.customFields || {};
                this.isFeatured = Boolean(data.isFeatured);
                this.isNew = Boolean(data.isNew);
                this.isBestseller = Boolean(data.isBestseller);
                this.isOnSale = Boolean(data.isOnSale);
                this.isInStock = Boolean(data.isInStock);
                this.isDigital = Boolean(data.isDigital);
                this.isVirtual = Boolean(data.isVirtual);
                this.isDownloadable = Boolean(data.isDownloadable);
                this.isGiftCard = Boolean(data.isGiftCard);
                this.isSubscription = Boolean(data.isSubscription);
                this.requiresShipping = Boolean(data.requiresShipping);
                this.isTaxable = Boolean(data.isTaxable);
                this.isBackorder = Boolean(data.isBackorder);
                this.isPreorder = Boolean(data.isPreorder);
                this.hasOptions = Boolean(data.hasOptions);
                this.hasVariants = Boolean(data.hasVariants);
                this.isActive = Boolean(data.isActive);
                this.isDeleted = Boolean(data.isDeleted);
            }

            generateId() {
                return 'prod_' + Math.random().toString(36).substr(2, 9);
            }

            generateSeoUrl() {
                return this.name.toLowerCase()
                    .replace(/[^a-z0-9а-яё]/g, '-')
                    .replace(/-+/g, '-')
                    .replace(/^-|-$/g, '');
            }

            getDiscountPercent() {
                if (this.oldPrice > 0 && this.price < this.oldPrice) {
                    return Math.round((1 - this.price / this.oldPrice) * 100);
                }
                return 0;
            }

            getStockStatus() {
                if (this.quantity <= 0) return 'out';
                if (this.quantity <= this.minQuantity) return 'low';
                return 'in';
            }

            getStockStatusText() {
                const status = this.getStockStatus();
                switch(status) {
                    case 'out': return 'Нет в наличии';
                    case 'low': return 'Мало осталось';
                    default: return 'В наличии';
                }
            }

            getRatingStars() {
                const stars = [];
                const fullStars = Math.floor(this.rating);
                const hasHalfStar = this.rating % 1 >= 0.5;
                
                for (let i = 1; i <= 5; i++) {
                    if (i <= fullStars) {
                        stars.push('fas fa-star');
                    } else if (i === fullStars + 1 && hasHalfStar) {
                        stars.push('fas fa-star-half-alt');
                    } else {
                        stars.push('far fa-star');
                    }
                }
                return stars;
            }

            getMainImage() {
                return this.images[0] || 'https://via.placeholder.com/300x300/ecf0f1/7f8c8d?text=Нет+изображения';
            }

            getThumbnail() {
                return this.images[0] || 'https://via.placeholder.com/100x100/ecf0f1/7f8c8d?text=Товар';
            }

            toCSV() {
                return [
                    this.id,
                    this.sku,
                    this.name,
                    this.category,
                    this.subcategory,
                    this.brand,
                    this.price,
                    this.oldPrice,
                    this.cost,
                    this.quantity,
                    this.minQuantity,
                    this.weight,
                    this.dimensions,
                    this.color,
                    this.size,
                    this.material,
                    this.description.substring(0, 100),
                    this.shortDescription,
                    this.images.join(','),
                    this.rating,
                    this.reviewsCount,
                    this.views,
                    this.sales,
                    this.status,
                    this.tags.join(','),
                    this.isFeatured ? '1' : '0',
                    this.isNew ? '1' : '0',
                    this.isBestseller ? '1' : '0',
                    this.isOnSale ? '1' : '0',
                    this.createdAt,
                    this.updatedAt
                ].join(';');
            }

            static fromCSV(csvRow) {
                const values = csvRow.split(';');
                return new Product({
                    id: values[0],
                    sku: values[1],
                    name: values[2],
                    category: values[3],
                    subcategory: values[4],
                    brand: values[5],
                    price: values[6],
                    oldPrice: values[7],
                    cost: values[8],
                    quantity: values[9],
                    minQuantity: values[10],
                    weight: values[11],
                    dimensions: values[12],
                    color: values[13],
                    size: values[14],
                    material: values[15],
                    description: values[16],
                    shortDescription: values[17],
                    images: values[18] ? values[18].split(',') : [],
                    rating: values[19],
                    reviewsCount: values[20],
                    views: values[21],
                    sales: values[22],
                    status: values[23],
                    tags: values[24] ? values[24].split(',') : [],
                    isFeatured: values[25] === '1',
                    isNew: values[26] === '1',
                    isBestseller: values[27] === '1',
                    isOnSale: values[28] === '1',
                    createdAt: values[29],
                    updatedAt: values[30]
                });
            }
        }

        class Category {
            constructor(data) {
                this.id = data.id || this.generateId();
                this.name = data.name || 'Без названия';
                this.slug = data.slug || this.generateSlug();
                this.description = data.description || '';
                this.image = data.image || '';
                this.icon = data.icon || '';
                this.parentId = data.parentId || null;
                this.order = parseInt(data.order) || 0;
                this.isActive = Boolean(data.isActive);
                this.isFeatured = Boolean(data.isFeatured);
                this.metaTitle = data.metaTitle || '';
                this.metaDescription = data.metaDescription || '';
                this.metaKeywords = data.metaKeywords || '';
                this.createdAt = data.createdAt || new Date().toISOString();
                this.updatedAt = data.updatedAt || new Date().toISOString();
                this.productCount = parseInt(data.productCount) || 0;
            }

            generateId() {
                return 'cat_' + Math.random().toString(36).substr(2, 9);
            }

            generateSlug() {
                return this.name.toLowerCase()
                    .replace(/[^a-z0-9а-яё]/g, '-')
                    .replace(/-+/g, '-')
                    .replace(/^-|-$/g, '');
            }

            getChildren(categories) {
                return categories.filter(cat => cat.parentId === this.id);
            }

            getParent(categories) {
                return categories.find(cat => cat.id === this.parentId);
            }

            getBreadcrumbs(categories) {
                const breadcrumbs = [];
                let current = this;
                
                while (current) {
                    breadcrumbs.unshift(current);
                    current = current.getParent(categories);
                }
                
                return breadcrumbs;
            }
        }

        class Cart {
            constructor() {
                this.items = [];
                this.coupon = null;
                this.shipping = null;
                this.tax = 0;
                this.discount = 0;
                this.createdAt = new Date().toISOString();
                this.updatedAt = new Date().toISOString();
            }

            addItem(product, quantity = 1, options = {}) {
                const existingItem = this.items.find(item => 
                    item.productId === product.id && 
                    JSON.stringify(item.options) === JSON.stringify(options)
                );

                if (existingItem) {
                    existingItem.quantity += quantity;
                } else {
                    this.items.push({
                        id: 'cart_item_' + Math.random().toString(36).substr(2, 9),
                        productId: product.id,
                        product: product,
                        quantity: quantity,
                        price: product.price,
                        options: options,
                        addedAt: new Date().toISOString()
                    });
                }

                this.update();
                this.save();
            }

            removeItem(itemId) {
                this.items = this.items.filter(item => item.id !== itemId);
                this.update();
                this.save();
            }

            updateQuantity(itemId, quantity) {
                const item = this.items.find(item => item.id === itemId);
                if (item) {
                    if (quantity <= 0) {
                        this.removeItem(itemId);
                    } else {
                        item.quantity = quantity;
                        this.update();
                        this.save();
                    }
                }
            }

            clear() {
                this.items = [];
                this.coupon = null;
                this.shipping = null;
                this.tax = 0;
                this.discount = 0;
                this.update();
                this.save();
            }

            update() {
                this.updatedAt = new Date().toISOString();
                
                // Обновляем информацию о товарах
                this.items.forEach(item => {
                    const product = products.find(p => p.id === item.productId);
                    if (product) {
                        item.product = product;
                        item.price = product.price;
                    }
                });

                // Пересчитываем итоги
                this.calculateTotals();
            }

            calculateTotals() {
                this.subtotal = this.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                
                // Применяем скидку
                if (this.coupon) {
                    this.discount = this.coupon.calculateDiscount(this.subtotal);
                } else {
                    this.discount = 0;
                }

                // Добавляем доставку
                this.shippingCost = this.shipping ? this.shipping.calculate(this.subtotal, this.items) : 0;

                // Добавляем налоги
                this.tax = this.subtotal * 0.2; // 20% НДС

                this.total = this.subtotal - this.discount + this.shippingCost + this.tax;
            }

            getItemCount() {
                return this.items.reduce((sum, item) => sum + item.quantity, 0);
            }

            save() {
                localStorage.setItem('cart', JSON.stringify({
                    items: this.items.map(item => ({
                        productId: item.productId,
                        quantity: item.quantity,
                        options: item.options
                    })),
                    coupon: this.coupon,
                    shipping: this.shipping,
                    updatedAt: this.updatedAt
                }));
            }

            load() {
                const saved = localStorage.getItem('cart');
                if (saved) {
                    const data = JSON.parse(saved);
                    this.items = data.items.map(itemData => {
                        const product = products.find(p => p.id === itemData.productId);
                        if (!product) return null;
                        
                        return {
                            id: 'cart_item_' + Math.random().toString(36).substr(2, 9),
                            productId: product.id,
                            product: product,
                            quantity: itemData.quantity,
                            price: product.price,
                            options: itemData.options || {},
                            addedAt: new Date().toISOString()
                        };
                    }).filter(Boolean);
                    
                    this.coupon = data.coupon;
                    this.shipping = data.shipping;
                    this.updatedAt = data.updatedAt;
                    this.update();
                }
            }

            toOrder() {
                return {
                    id: 'order_' + Math.random().toString(36).substr(2, 9),
                    items: this.items.map(item => ({
                        productId: item.productId,
                        name: item.product.name,
                        quantity: item.quantity,
                        price: item.price,
                        options: item.options
                    })),
                    subtotal: this.subtotal,
                    discount: this.discount,
                    shippingCost: this.shippingCost,
                    tax: this.tax,
                    total: this.total,
                    coupon: this.coupon,
                    shipping: this.shipping,
                    createdAt: new Date().toISOString(),
                    status: 'pending'
                };
            }
        }

        class Coupon {
            constructor(data) {
                this.code = data.code;
                this.type = data.type; // 'percentage', 'fixed', 'shipping'
                this.value = parseFloat(data.value);
                this.minOrder = parseFloat(data.minOrder) || 0;
                this.maxDiscount = parseFloat(data.maxDiscount) || Infinity;
                this.uses = parseInt(data.uses) || 0;
                this.maxUses = parseInt(data.maxUses) || Infinity;
                this.startDate = data.startDate ? new Date(data.startDate) : null;
                this.endDate = data.endDate ? new Date(data.endDate) : null;
                this.isActive = Boolean(data.isActive);
            }

            calculateDiscount(subtotal) {
                if (!this.isValid(subtotal)) return 0;

                let discount = 0;
                
                if (this.type === 'percentage') {
                    discount = subtotal * (this.value / 100);
                } else if (this.type === 'fixed') {
                    discount = this.value;
                }

                if (discount > this.maxDiscount) {
                    discount = this.maxDiscount;
                }

                return discount;
            }

            isValid(subtotal) {
                if (!this.isActive) return false;
                if (this.uses >= this.maxUses) return false;
                if (this.startDate && new Date() < this.startDate) return false;
                if (this.endDate && new Date() > this.endDate) return false;
                if (subtotal < this.minOrder) return false;
                
                return true;
            }

            use() {
                this.uses++;
            }
        }

        class ShippingMethod {
            constructor(data) {
                this.id = data.id;
                this.name = data.name;
                this.description = data.description;
                this.cost = parseFloat(data.cost);
                this.freeThreshold = parseFloat(data.freeThreshold) || Infinity;
                this.deliveryTime = data.deliveryTime;
                this.isActive = Boolean(data.isActive);
            }

            calculate(subtotal, items) {
                if (subtotal >= this.freeThreshold) {
                    return 0;
                }
                return this.cost;
            }
        }

        // ==================== УТИЛИТЫ ====================
        const Utils = {
            formatPrice(price) {
                return new Intl.NumberFormat('ru-RU', {
                    style: 'currency',
                    currency: 'RUB',
                    minimumFractionDigits: 0,
                    maximumFractionDigits: 2
                }).format(price).replace('₽', '₽');
            },

            formatDate(date, format = 'short') {
                const d = new Date(date);
                if (format === 'short') {
                    return d.toLocaleDateString('ru-RU');
                } else if (format === 'long') {
                    return d.toLocaleDateString('ru-RU', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                } else if (format === 'datetime') {
                    return d.toLocaleString('ru-RU');
                }
                return d.toISOString();
            },

            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            },

            throttle(func, limit) {
                let inThrottle;
                return function() {
                    const args = arguments;
                    const context = this;
                    if (!inThrottle) {
                        func.apply(context, args);
                        inThrottle = true;
                        setTimeout(() => inThrottle = false, limit);
                    }
                };
            },

            generateId(prefix = '') {
                return prefix + Math.random().toString(36).substr(2, 9);
            },

            slugify(text) {
                return text.toString().toLowerCase()
                    .replace(/[^\w\u0400-\u04FF]+/g, '-')
                    .replace(/^-+/, '')
                    .replace(/-+$/, '');
            },

            truncate(text, length = 100) {
                if (text.length <= length) return text;
                return text.substr(0, length) + '...';
            },

            parseCSV(csvText) {
                const lines = csvText.split('\n').filter(line => line.trim() !== '');
                if (lines.length < 2) return [];
                
                const delimiter = csvText.includes(';') ? ';' : ',';
                const headers = lines[0].split(delimiter).map(h => h.trim());
                
                const results = [];
                for (let i = 1; i < lines.length; i++) {
                    const values = lines[i].split(delimiter);
                    const obj = {};
                    
                    headers.forEach((header, index) => {
                        if (values[index] !== undefined) {
                            obj[header] = values[index].trim();
                        }
                    });
                    
                    results.push(obj);
                }
                
                return results;
            },

            exportCSV(data, filename = 'export.csv') {
                const csvContent = this.convertToCSV(data);
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                
                if (link.download !== undefined) {
                    const url = URL.createObjectURL(blob);
                    link.setAttribute('href', url);
                    link.setAttribute('download', filename);
                    link.style.visibility = 'hidden';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                }
            },

            convertToCSV(data) {
                if (data.length === 0) return '';
                
                const headers = Object.keys(data[0]);
                const rows = data.map(row => 
                    headers.map(header => 
                        JSON.stringify(row[header] || '')
                    ).join(';')
                );
                
                return [headers.join(';'), ...rows].join('\n');
            },

            showNotification(message, type = 'info', duration = 3000) {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <div class="notification-icon">
                        ${this.getNotificationIcon(type)}
                    </div>
                    <div class="notification-content">
                        <div class="notification-title">${this.getNotificationTitle(type)}</div>
                        <div class="notification-message">${message}</div>
                    </div>
                    <button class="notification-close" onclick="this.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                const container = document.querySelector('.notifications') || this.createNotificationContainer();
                container.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentElement) {
                        notification.style.opacity = '0';
                        notification.style.transform = 'translateX(100%)';
                        setTimeout(() => notification.remove(), 300);
                    }
                }, duration);
            },

            getNotificationIcon(type) {
                switch(type) {
                    case 'success': return '<i class="fas fa-check-circle"></i>';
                    case 'error': return '<i class="fas fa-exclamation-circle"></i>';
                    case 'warning': return '<i class="fas fa-exclamation-triangle"></i>';
                    default: return '<i class="fas fa-info-circle"></i>';
                }
            },

            getNotificationTitle(type) {
                switch(type) {
                    case 'success': return 'Успех';
                    case 'error': return 'Ошибка';
                    case 'warning': return 'Внимание';
                    default: return 'Информация';
                }
            },

            createNotificationContainer() {
                const container = document.createElement('div');
                container.className = 'notifications';
                document.body.appendChild(container);
                return container;
            },

            showLoader(show = true) {
                let loader = document.getElementById('loaderOverlay');
                
                if (!loader && show) {
                    loader = document.createElement('div');
                    loader.id = 'loaderOverlay';
                    loader.className = 'loader-overlay';
                    loader.innerHTML = '<div class="loader"></div>';
                    document.body.appendChild(loader);
                }
                
                if (loader) {
                    loader.classList.toggle('active', show);
                }
            },

            confirm(message) {
                return new Promise((resolve) => {
                    const modal = document.createElement('div');
                    modal.className = 'modal active';
                    modal.innerHTML = `
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>Подтверждение</h3>
                            </div>
                            <div class="modal-body">
                                <p>${message}</p>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-outline" onclick="this.closest('.modal').remove(); resolve(false)">Отмена</button>
                                <button class="btn btn-primary" onclick="this.closest('.modal').remove(); resolve(true)">OK</button>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(modal);
                });
            },

            prompt(message, defaultValue = '') {
                return new Promise((resolve) => {
                    const modal = document.createElement('div');
                    modal.className = 'modal active';
                    modal.innerHTML = `
                        <div class="modal-content">
                            <div class="modal-header">
                                <h3>Ввод</h3>
                            </div>
                            <div class="modal-body">
                                <p>${message}</p>
                                <input type="text" class="form-control" value="${defaultValue}" id="promptInput">
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-outline" onclick="this.closest('.modal').remove(); resolve(null)">Отмена</button>
                                <button class="btn btn-primary" onclick="this.closest('.modal').remove(); resolve(document.getElementById('promptInput').value)">OK</button>
                            </div>
                        </div>
                    `;
                    
                    document.body.appendChild(modal);
                    document.getElementById('promptInput').focus();
                });
            },

            validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            },

            validatePhone(phone) {
                const re = /^[\+]?[0-9\s\-\(\)]+$/;
                return re.test(phone);
            },

            validateURL(url) {
                try {
                    new URL(url);
                    return true;
                } catch (_) {
                    return false;
                }
            },

            deepClone(obj) {
                return JSON.parse(JSON.stringify(obj));
            },

            mergeObjects(target, source) {
                for (const key in source) {
                    if (source[key] && typeof source[key] === 'object' && !Array.isArray(source[key])) {
                        if (!target[key]) target[key] = {};
                        this.mergeObjects(target[key], source[key]);
                    } else {
                        target[key] = source[key];
                    }
                }
                return target;
            },

            getQueryParam(name) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(name);
            },

            setQueryParam(name, value) {
                const url = new URL(window.location);
                url.searchParams.set(name, value);
                window.history.pushState({}, '', url);
            },

            removeQueryParam(name) {
                const url = new URL(window.location);
                url.searchParams.delete(name);
                window.history.pushState({}, '', url);
            },

            getBrowserInfo() {
                return {
                    userAgent: navigator.userAgent,
                    language: navigator.language,
                    platform: navigator.platform,
                    cookiesEnabled: navigator.cookieEnabled,
                    screenWidth: window.screen.width,
                    screenHeight: window.screen.height,
                    windowWidth: window.innerWidth,
                    windowHeight: window.innerHeight
                };
            },

            isMobile() {
                return window.innerWidth <= 768;
            },

            isTablet() {
                return window.innerWidth > 768 && window.innerWidth <= 1024;
            },

            isDesktop() {
                return window.innerWidth > 1024;
            },

            copyToClipboard(text) {
                return navigator.clipboard.writeText(text).then(() => {
                    this.showNotification('Скопировано в буфер обмена', 'success');
                    return true;
                }).catch(err => {
                    this.showNotification('Не удалось скопировать', 'error');
                    console.error('Copy failed:', err);
                    return false;
                });
            },

            generatePassword(length = 12) {
                const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*';
                let password = '';
                for (let i = 0; i < length; i++) {
                    password += charset.charAt(Math.floor(Math.random() * charset.length));
                }
                return password;
            },

            formatBytes(bytes, decimals = 2) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const dm = decimals < 0 ? 0 : decimals;
                const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];
            },

            calculateAge(birthDate) {
                const today = new Date();
                const birth = new Date(birthDate);
                let age = today.getFullYear() - birth.getFullYear();
                const monthDiff = today.getMonth() - birth.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
                    age--;
                }
                
                return age;
            },

            getTimeAgo(date) {
                const seconds = Math.floor((new Date() - new Date(date)) / 1000);
                
                let interval = seconds / 31536000;
                if (interval > 1) {
                    return Math.floor(interval) + ' лет назад';
                }
                
                interval = seconds / 2592000;
                if (interval > 1) {
                    return Math.floor(interval) + ' месяцев назад';
                }
                
                interval = seconds / 86400;
                if (interval > 1) {
                    return Math.floor(interval) + ' дней назад';
                }
                
                interval = seconds / 3600;
                if (interval > 1) {
                    return Math.floor(interval) + ' часов назад';
                }
                
                interval = seconds / 60;
                if (interval > 1) {
                    return Math.floor(interval) + ' минут назад';
                }
                
                return Math.floor(seconds) + ' секунд назад';
            },

            generateQRCode(text, size = 128) {
                // Простая реализация QR code через API
                return `https://api.qrserver.com/v1/create-qr-code/?size=${size}x${size}&data=${encodeURIComponent(text)}`;
            },

            getRandomColor() {
                const letters = '0123456789ABCDEF';
                let color = '#';
                for (let i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            },

            getContrastColor(hexColor) {
                const r = parseInt(hexColor.substr(1, 2), 16);
                const g = parseInt(hexColor.substr(3, 2), 16);
                const b = parseInt(hexColor.substr(5, 2), 16);
                const brightness = (r * 299 + g * 587 + b * 114) / 1000;
                return brightness > 128 ? '#000000' : '#FFFFFF';
            },

            animateValue(element, start, end, duration) {
                const startTime = performance.now();
                const step = (currentTime) => {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    
                    const value = start + (end - start) * progress;
                    element.textContent = Math.floor(value).toLocaleString();
                    
                    if (progress < 1) {
                        requestAnimationFrame(step);
                    }
                };
                
                requestAnimationFrame(step);
            },

            createPagination(totalItems, itemsPerPage, currentPage, onPageChange) {
                const totalPages = Math.ceil(totalItems / itemsPerPage);
                const pagination = document.createElement('div');
                pagination.className = 'pagination';
                
                // Кнопка "Назад"
                const prevButton = document.createElement('button');
                prevButton.className = 'page-link';
                prevButton.innerHTML = '<i class="fas fa-chevron-left"></i>';
                prevButton.disabled = currentPage === 1;
                prevButton.onclick = () => onPageChange(currentPage - 1);
                pagination.appendChild(prevButton);
                
                // Номера страниц
                const startPage = Math.max(1, currentPage - 2);
                const endPage = Math.min(totalPages, currentPage + 2);
                
                for (let i = startPage; i <= endPage; i++) {
                    const pageButton = document.createElement('button');
                    pageButton.className = `page-link ${i === currentPage ? 'active' : ''}`;
                    pageButton.textContent = i;
                    pageButton.onclick = () => onPageChange(i);
                    pagination.appendChild(pageButton);
                }
                
                // Кнопка "Вперед"
                const nextButton = document.createElement('button');
                nextButton.className = 'page-link';
                nextButton.innerHTML = '<i class="fas fa-chevron-right"></i>';
                nextButton.disabled = currentPage === totalPages;
                nextButton.onclick = () => onPageChange(currentPage + 1);
                pagination.appendChild(nextButton);
                
                return pagination;
            },

            createChart(canvasId, type, data, options = {}) {
                const canvas = document.getElementById(canvasId);
                if (!canvas) return null;
                
                const ctx = canvas.getContext('2d');
                return new Chart(ctx, {
                    type: type,
                    data: data,
                    options: this.mergeObjects({
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }, options)
                });
            }
        };

        // ==================== API ====================
        const API = {
            async loadProducts() {
                try {
                    Utils.showLoader(true);
                    
                    // Пробуем загрузить из Google Sheets
                    const exportUrl = `https://docs.google.com/spreadsheets/d/${CONFIG.GOOGLE_SHEETS.SHEET_ID}/export?format=csv&gid=${CONFIG.GOOGLE_SHEETS.GID}`;
                    
                    const response = await fetch(exportUrl);
                    if (!response.ok) throw new Error('Google Sheets недоступен');
                    
                    const csvText = await response.text();
                    const csvData = Utils.parseCSV(csvText);
                    
                    products = csvData.map(row => new Product({
                        id: row['ID'] || row['id'],
                        sku: row['SKU'] || row['Артикул'],
                        name: row['Название'] || row['Name'],
                        category: row['Категория'] || row['Category'],
                        price: parseFloat(row['Цена']) || parseFloat(row['Price']),
                        quantity: parseInt(row['Количество']) || parseInt(row['Quantity']),
                        description: row['Описание'] || row['Description'],
                        images: [row['Изображение'] || row['Image']].filter(Boolean)
                    })).filter(p => p.name && p.price > 0);
                    
                    // Извлекаем категории
                    categories = [...new Set(products.map(p => p.category))]
                        .filter(Boolean)
                        .map(name => new Category({ name }));
                    
                    // Сохраняем в localStorage
                    localStorage.setItem('products_data', JSON.stringify(products));
                    localStorage.setItem('categories_data', JSON.stringify(categories));
                    localStorage.setItem('last_update', new Date().toISOString());
                    
                    Utils.showNotification(`Загружено ${products.length} товаров`, 'success');
                    return products;
                    
                } catch (error) {
                    console.error('Ошибка загрузки:', error);
                    
                    // Пробуем загрузить из localStorage
                    const savedProducts = localStorage.getItem('products_data');
                    if (savedProducts) {
                        products = JSON.parse(savedProducts).map(data => new Product(data));
                        categories = JSON.parse(localStorage.getItem('categories_data') || '[]');
                        Utils.showNotification('Загружены локальные данные', 'warning');
                        return products;
                    }
                    
                    // Загружаем демо-данные
                    products = this.loadDemoProducts();
                    categories = this.loadDemoCategories();
                    Utils.showNotification('Загружены демо-данные', 'info');
                    return products;
                    
                } finally {
                    Utils.showLoader(false);
                }
            },

            loadDemoProducts() {
                return [
                    new Product({
                        id: 'prod_1',
                        name: 'Смартфон Apple iPhone 14 Pro',
                        category: 'Смартфоны',
                        price: 99990,
                        oldPrice: 109990,
                        quantity: 15,
                        description: 'Флагманский смартфон Apple с динамическим островом',
                        images: ['https://via.placeholder.com/300x300/3498db/ffffff?text=iPhone'],
                        rating: 4.8,
                        reviewsCount: 125,
                        isFeatured: true,
                        isNew: true,
                        isBestseller: true
                    }),
                    new Product({
                        id: 'prod_2',
                        name: 'Ноутбук MacBook Pro 16"',
                        category: 'Ноутбуки',
                        price: 249990,
                        quantity: 8,
                        description: 'Профессиональный ноутбук от Apple',
                        images: ['https://via.placeholder.com/300x300/e74c3c/ffffff?text=MacBook'],
                        rating: 4.9,
                        reviewsCount: 89,
                        isFeatured: true,
                        isBestseller: true
                    }),
                    new Product({
                        id: 'prod_3',
                        name: 'Наушники Sony WH-1000XM5',
                        category: 'Наушники',
                        price: 34990,
                        oldPrice: 39990,
                        quantity: 25,
                        description: 'Беспроводные наушники с шумоподавлением',
                        images: ['https://via.placeholder.com/300x300/2ecc71/ffffff?text=Sony'],
                        rating: 4.7,
                        reviewsCount: 203,
                        isOnSale: true
                    }),
                    new Product({
                        id: 'prod_4',
                        name: 'Фотоаппарат Canon EOS R6',
                        category: 'Фотоаппараты',
                        price: 189990,
                        quantity: 5,
                        description: 'Профессиональная беззеркальная камера',
                        images: ['https://via.placeholder.com/300x300/9b59b6/ffffff?text=Canon'],
                        rating: 4.9,
                        reviewsCount: 42,
                        isFeatured: true
                    }),
                    new Product({
                        id: 'prod_5',
                        name: 'Телевизор Samsung QLED 65"',
                        category: 'Телевизоры',
                        price: 129990,
                        oldPrice: 149990,
                        quantity: 12,
                        description: '4K QLED телевизор с поддержкой HDR',
                        images: ['https://via.placeholder.com/300x300/34495e/ffffff?text=Samsung'],
                        rating: 4.6,
                        reviewsCount: 167,
                        isOnSale: true
                    })
                ];
            },

            loadDemoCategories() {
                return [
                    new Category({ name: 'Смартфоны', productCount: 15 }),
                    new Category({ name: 'Ноутбуки', productCount: 8 }),
                    new Category({ name: 'Наушники', productCount: 25 }),
                    new Category({ name: 'Фотоаппараты', productCount: 5 }),
                    new Category({ name: 'Телевизоры', productCount: 12 })
                ];
            },

            async saveProductsToGoogleSheets() {
                try {
                    Utils.showLoader(true);
                    
                    // Преобразуем товары в CSV
                    const csvContent = products.map(p => p.toCSV()).join('\n');
                    const headers = 'ID;SKU;Название;Категория;Подкатегория;Бренд;Цена;Старая цена;Себестоимость;Количество;Мин.количество;Вес;Габариты;Цвет;Размер;Материал;Описание;Краткое описание;Изображения;Рейтинг;Отзывы;Просмотры;Продажи;Статус;Теги;Избранное;Новый;Бестселлер;Распродажа;Создан;Обновлен';
                    const csv = headers + '\n' + csvContent;
                    
                    // Здесь должна быть логика сохранения в Google Sheets
                    // Для демонстрации просто скачиваем файл
                    Utils.exportCSV(products.map(p => p.toCSV().split(';')), 'products_export.csv');
                    
                    Utils.showNotification('Данные экспортированы в CSV', 'success');
                    
                } catch (error) {
                    console.error('Ошибка сохранения:', error);
                    Utils.showNotification('Ошибка при экспорте данных', 'error');
                } finally {
                    Utils.showLoader(false);
                }
            },

            async uploadCSV(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    
                    reader.onload = async (event) => {
                        try {
                            Utils.showLoader(true);
                            
                            const csvText = event.target.result;
                            const csvData = Utils.parseCSV(csvText);
                            
                            // Очищаем текущие товары или объединяем
                            if (await Utils.confirm('Очистить текущий каталог перед загрузкой?')) {
                                products = [];
                            }
                            
                            // Добавляем новые товары
                            const newProducts = csvData.map(row => new Product({
                                id: row['ID'] || Utils.generateId('prod_'),
                                name: row['Название'] || row['Name'],
                                category: row['Категория'] || row['Category'],
                                price: parseFloat(row['Цена']) || parseFloat(row['Price']),
                                quantity: parseInt(row['Количество']) || parseInt(row['Quantity']),
                                description: row['Описание'] || row['Description'],
                                images: [row['Изображение'] || row['Image']].filter(Boolean)
                            })).filter(p => p.name && p.price > 0);
                            
                            products.push(...newProducts);
                            
                            // Обновляем категории
                            categories = [...new Set(products.map(p => p.category))]
                                .filter(Boolean)
                                .map(name => new Category({ name }));
                            
                            // Сохраняем
                            localStorage.setItem('products_data', JSON.stringify(products));
                            localStorage.setItem('categories_data', JSON.stringify(categories));
                            localStorage.setItem('last_update', new Date().toISOString());
                            
                            Utils.showNotification(`Загружено ${newProducts.length} товаров`, 'success');
                            resolve(newProducts);
                            
                        } catch (error) {
                            console.error('Ошибка обработки CSV:', error);
                            Utils.showNotification('Ошибка при обработке файла', 'error');
                            reject(error);
                        } finally {
                            Utils.showLoader(false);
                        }
                    };
                    
                    reader.onerror = () => {
                        Utils.showNotification('Ошибка чтения файла', 'error');
                        reject(new Error('File read error'));
                    };
                    
                    reader.readAsText(file, 'UTF-8');
                });
            }
        };

        // ==================== UI КОМПОНЕНТЫ ====================
        const UI = {
            init() {
                this.renderHeader();
                this.renderHero();
                this.renderCategories();
                this.renderProducts();
                this.renderCart();
                this.renderAdminPanel();
                this.renderFooter();
                this.bindEvents();
            },

            renderHeader() {
                const header = document.querySelector('header') || document.createElement('header');
                header.innerHTML = `
                    <div class="header-container">
                        <a href="/" class="logo">
                            <div class="logo-icon">P</div>
                            <div class="logo-text">
                                <div class="logo-title">PRODTORG</div>
                                <div class="logo-subtitle">Интернет-магазин</div>
                            </div>
                        </a>
                        
                        <nav class="nav-menu">
                            <a href="#products" class="nav-link active">Каталог</a>
                            <a href="#categories" class="nav-link">Категории</a>
                            <a href="#about" class="nav-link">О нас</a>
                            <a href="#contacts" class="nav-link">Контакты</a>
                        </nav>
                        
                        <div class="header-actions">
                            <div class="search-container">
                                <i class="fas fa-search search-icon"></i>
                                <input type="text" class="search-input" placeholder="Поиск товаров..." id="searchInput">
                            </div>
                            
                            <button class="action-btn" onclick="UI.toggleWishlist()">
                                <i class="far fa-heart"></i>
                                <span class="badge" id="wishlistCount">0</span>
                            </button>
                            
                            <button class="action-btn" onclick="UI.toggleCart()">
                                <i class="fas fa-shopping-cart"></i>
                                <span class="badge" id="cartCount">0</span>
                            </button>
                            
                            <button class="action-btn" onclick="UI.toggleAdminPanel()">
                                <i class="fas fa-cog"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                if (!document.querySelector('header')) {
                    document.body.insertBefore(header, document.body.firstChild);
                }
            },

            renderHero() {
                const hero = document.createElement('section');
                hero.className = 'hero';
                hero.innerHTML = `
                    <div class="container">
                        <div class="hero-content">
                            <h1 class="hero-title">Добро пожаловать в PRODTORG</h1>
                            <p class="hero-subtitle">Лучшие товары по выгодным ценам. Более ${products.length} товаров в каталоге.</p>
                            <div class="hero-actions">
                                <a href="#products" class="btn btn-primary btn-lg">
                                    <i class="fas fa-shopping-bag"></i> Перейти к покупкам
                                </a>
                                <button class="btn btn-outline btn-lg" onclick="UI.toggleAdminPanel()">
                                    <i class="fas fa-cog"></i> Управление каталогом
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(hero);
            },

            renderCategories() {
                const section = document.createElement('section');
                section.className = 'section';
                section.id = 'categories';
                section.innerHTML = `
                    <div class="container">
                        <h2 class="section-title">Категории товаров</h2>
                        <div class="categories-grid" id="categoriesGrid">
                            ${categories.map(category => `
                                <a href="#category-${category.slug}" class="category-card" onclick="UI.filterByCategory('${category.name}')">
                                    <div class="category-image">
                                        <i class="fas fa-box"></i>
                                    </div>
                                    <div class="category-content">
                                        <h3 class="category-title">${category.name}</h3>
                                        <div class="category-count">${category.productCount} товаров</div>
                                    </div>
                                </a>
                            `).join('')}
                        </div>
                    </div>
                `;
                
                document.body.appendChild(section);
            },

            renderProducts() {
                const section = document.createElement('section');
                section.className = 'section';
                section.id = 'products';
                section.innerHTML = `
                    <div class="container">
                        <div class="products-header">
                            <h2 class="section-title" style="margin: 0;">Каталог товаров</h2>
                            <div class="products-controls">
                                <div class="sort-dropdown">
                                    <button class="sort-btn" onclick="UI.toggleSortDropdown()">
                                        <i class="fas fa-sort"></i>
                                        <span id="sortLabel">Сортировка</span>
                                        <i class="fas fa-chevron-down"></i>
                                    </button>
                                    <div class="sort-dropdown-content" id="sortDropdown">
                                        <div class="sort-item" onclick="UI.sortProducts('default')">
                                            <i class="fas fa-sort"></i> По умолчанию
                                        </div>
                                        <div class="sort-item" onclick="UI.sortProducts('price_asc')">
                                            <i class="fas fa-sort-amount-up"></i> Цена по возрастанию
                                        </div>
                                        <div class="sort-item" onclick="UI.sortProducts('price_desc')">
                                            <i class="fas fa-sort-amount-down"></i> Цена по убыванию
                                        </div>
                                        <div class="sort-item" onclick="UI.sortProducts('name')">
                                            <i class="fas fa-sort-alpha-down"></i> По названию
                                        </div>
                                        <div class="sort-item" onclick="UI.sortProducts('new')">
                                            <i class="fas fa-star"></i> Сначала новые
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="view-toggle">
                                    <button class="view-btn ${currentView === 'grid' ? 'active' : ''}" onclick="UI.setView('grid')">
                                        <i class="fas fa-th-large"></i>
                                    </button>
                                    <button class="view-btn ${currentView === 'list' ? 'active' : ''}" onclick="UI.setView('list')">
                                        <i class="fas fa-list"></i>
                                    </button>
                                </div>
                                
                                <button class="btn btn-primary" onclick="API.loadProducts()">
                                    <i class="fas fa-sync-alt"></i> Обновить
                                </button>
                            </div>
                        </div>
                        
                        <div id="productsContainer" class="${currentView === 'grid' ? 'grid grid-4' : 'flex flex-col gap-6'}">
                            <!-- Товары будут загружены динамически -->
                        </div>
                        
                        <div class="pagination-wrapper" id="paginationContainer">
                            <!-- Пагинация -->
                        </div>
                    </div>
                `;
                
                document.body.appendChild(section);
                this.updateProductsDisplay();
            },

            updateProductsDisplay() {
                const container = document.getElementById('productsContainer');
                const paginationContainer = document.getElementById('paginationContainer');
                
                if (!container) return;
                
                // Применяем сортировку
                let filteredProducts = [...products];
                
                switch(currentSort) {
                    case 'price_asc':
                        filteredProducts.sort((a, b) => a.price - b.price);
                        break;
                    case 'price_desc':
                        filteredProducts.sort((a, b) => b.price - a.price);
                        break;
                    case 'name':
                        filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
                        break;
                    case 'new':
                        filteredProducts.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                        break;
                }
                
                // Пагинация
                const totalPages = Math.ceil(filteredProducts.length / itemsPerPage);
                const startIndex = (currentPage - 1) * itemsPerPage;
                const endIndex = startIndex + itemsPerPage;
                const pageProducts = filteredProducts.slice(startIndex, endIndex);
                
                if (currentView === 'grid') {
                    container.innerHTML = pageProducts.map(product => this.renderProductCard(product)).join('');
                } else {
                    container.innerHTML = pageProducts.map(product => this.renderProductRow(product)).join('');
                }
                
                // Пагинация
                if (totalPages > 1) {
                    paginationContainer.innerHTML = '';
                    paginationContainer.appendChild(
                        Utils.createPagination(filteredProducts.length, itemsPerPage, currentPage, (page) => {
                            currentPage = page;
                            this.updateProductsDisplay();
                        })
                    );
                } else {
                    paginationContainer.innerHTML = '';
                }
            },

            renderProductCard(product) {
                const discount = product.getDiscountPercent();
                const stockStatus = product.getStockStatus();
                const ratingStars = product.getRatingStars();
                
                return `
                    <div class="product-card">
                        <div class="product-badges">
                            ${product.isNew ? '<span class="badge badge-new">Новинка</span>' : ''}
                            ${discount > 0 ? `<span class="badge badge-sale">-${discount}%</span>` : ''}
                            ${product.isBestseller ? '<span class="badge badge-hot">Бестселлер</span>' : ''}
                            ${stockStatus === 'out' ? '<span class="badge badge-out">Нет в наличии</span>' : ''}
                        </div>
                        
                        <div class="product-image">
                            <img src="${product.getMainImage()}" alt="${product.name}"
                                 onerror="this.src='https://via.placeholder.com/300x300/ecf0f1/7f8c8d?text=Нет+изображения'">
                            
                            <div class="product-actions">
                                <button class="action-btn-small" onclick="UI.toggleWishlistItem('${product.id}')">
                                    <i class="${wishlist.includes(product.id) ? 'fas' : 'far'} fa-heart"></i>
                                </button>
                                <button class="action-btn-small" onclick="UI.quickView('${product.id}')">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="action-btn-small" onclick="UI.compareProduct('${product.id}')">
                                    <i class="fas fa-balance-scale"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="product-content">
                            <div class="product-category">${product.category}</div>
                            <h3 class="product-title">${product.name}</h3>
                            <p class="product-description">${Utils.truncate(product.description, 100)}</p>
                            
                            <div class="product-rating">
                                <div class="rating-stars">
                                    ${ratingStars.map(star => `<i class="${star}"></i>`).join('')}
                                </div>
                                <span class="rating-count">(${product.reviewsCount})</span>
                            </div>
                            
                            <div class="product-price">
                                <span class="current-price">${Utils.formatPrice(product.price)}</span>
                                ${product.oldPrice > product.price ? 
                                    `<span class="old-price">${Utils.formatPrice(product.oldPrice)}</span>` : ''}
                            </div>
                            
                            <div class="product-meta">
                                <div class="stock-status">
                                    <span class="stock-indicator stock-${stockStatus}"></span>
                                    ${product.getStockStatusText()}
                                </div>
                                
                                <button class="btn btn-primary btn-sm" 
                                        onclick="UI.addToCart('${product.id}')"
                                        ${stockStatus === 'out' ? 'disabled' : ''}>
                                    <i class="fas fa-cart-plus"></i> В корзину
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            },

            renderProductRow(product) {
                const discount = product.getDiscountPercent();
                const stockStatus = product.getStockStatus();
                
                return `
                    <div class="card">
                        <div class="flex items-center gap-6">
                            <div class="product-table-image">
                                <img src="${product.getThumbnail()}" alt="${product.name}"
                                     onerror="this.src='https://via.placeholder.com/100x100/ecf0f1/7f8c8d?text=Товар'">
                            </div>
                            
                            <div class="flex-1">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <h3 class="product-title">${product.name}</h3>
                                        <div class="product-category">${product.category}</div>
                                        <p class="product-description">${Utils.truncate(product.description, 200)}</p>
                                    </div>
                                    
                                    <div class="text-right">
                                        <div class="product-price">
                                            <span class="current-price">${Utils.formatPrice(product.price)}</span>
                                            ${product.oldPrice > product.price ? 
                                                `<span class="old-price">${Utils.formatPrice(product.oldPrice)}</span>` : ''}
                                        </div>
                                        ${discount > 0 ? `<div class="text-success font-semibold">-${discount}%</div>` : ''}
                                    </div>
                                </div>
                                
                                <div class="flex justify-between items-center mt-4">
                                    <div class="stock-status">
                                        <span class="stock-indicator stock-${stockStatus}"></span>
                                        ${product.getStockStatusText()} • ${product.quantity} шт.
                                    </div>
                                    
                                    <div class="flex gap-2">
                                        <button class="btn btn-outline btn-sm" onclick="UI.toggleWishlistItem('${product.id}')">
                                            <i class="${wishlist.includes(product.id) ? 'fas' : 'far'} fa-heart"></i>
                                        </button>
                                        <button class="btn btn-outline btn-sm" onclick="UI.quickView('${product.id}')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                        <button class="btn btn-primary btn-sm" 
                                                onclick="UI.addToCart('${product.id}')"
                                                ${stockStatus === 'out' ? 'disabled' : ''}>
                                            <i class="fas fa-cart-plus"></i> В корзину
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            },

            renderCart() {
                const cartModal = document.createElement('div');
                cartModal.className = 'cart-modal';
                cartModal.id = 'cartModal';
                cartModal.innerHTML = `
                    <div class="cart-header">
                        <h3 class="cart-title">Корзина</h3>
                        <button class="cart-close" onclick="UI.toggleCart()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    
                    <div class="cart-body" id="cartBody">
                        <!-- Содержимое корзины -->
                    </div>
                    
                    <div class="cart-footer">
                        <div class="cart-summary" id="cartSummary">
                            <!-- Итоги -->
                        </div>
                        <button class="btn btn-primary btn-block" onclick="UI.checkout()">
                            <i class="fas fa-shopping-bag"></i> Оформить заказ
                        </button>
                    </div>
                `;
                
                document.body.appendChild(cartModal);
            },

            updateCart() {
                const cartCount = document.getElementById('cartCount');
                const cartBody = document.getElementById('cartBody');
                const cartSummary = document.getElementById('cartSummary');
                
                if (!cartBody || !cartSummary) return;
                
                const cart = window.cart || new Cart();
                
                // Обновляем счетчик
                if (cartCount) {
                    cartCount.textContent = cart.getItemCount();
                }
                
                // Обновляем содержимое корзины
                if (cart.items.length === 0) {
                    cartBody.innerHTML = `
                        <div class="cart-empty">
                            <div class="cart-empty-icon">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <h3>Корзина пуста</h3>
                            <p>Добавьте товары из каталога</p>
                        </div>
                    `;
                    cartSummary.innerHTML = '';
                } else {
                    cartBody.innerHTML = cart.items.map(item => `
                        <div class="cart-item">
                            <div class="cart-item-image">
                                <img src="${item.product.getThumbnail()}" alt="${item.product.name}">
                            </div>
                            
                            <div class="cart-item-content">
                                <h4 class="cart-item-title">${item.product.name}</h4>
                                <div class="cart-item-price">${Utils.formatPrice(item.price)}</div>
                                
                                <div class="cart-item-controls">
                                    <button class="quantity-btn" onclick="UI.updateCartQuantity('${item.id}', ${item.quantity - 1})">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input type="number" class="quantity-input" value="${item.quantity}" min="1" 
                                           onchange="UI.updateCartQuantity('${item.id}', parseInt(this.value))">
                                    <button class="quantity-btn" onclick="UI.updateCartQuantity('${item.id}', ${item.quantity + 1})">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                    
                                    <button class="cart-item-remove" onclick="UI.removeFromCart('${item.id}')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                    
                    cartSummary.innerHTML = `
                        <div class="summary-row">
                            <span>Товары (${cart.items.length}):</span>
                            <span>${Utils.formatPrice(cart.subtotal)}</span>
                        </div>
                        ${cart.discount > 0 ? `
                            <div class="summary-row">
                                <span>Скидка:</span>
                                <span class="text-success">-${Utils.formatPrice(cart.discount)}</span>
                            </div>
                        ` : ''}
                        ${cart.shippingCost > 0 ? `
                            <div class="summary-row">
                                <span>Доставка:</span>
                                <span>${Utils.formatPrice(cart.shippingCost)}</span>
                            </div>
                        ` : ''}
                        <div class="summary-row">
                            <span>Налог:</span>
                            <span>${Utils.formatPrice(cart.tax)}</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span>Итого:</span>
                            <span>${Utils.formatPrice(cart.total)}</span>
                        </div>
                    `;
                }
            },

            renderAdminPanel() {
                const adminModal = document.createElement('div');
                adminModal.className = 'admin-modal';
                adminModal.id = 'adminModal';
                adminModal.innerHTML = `
                    <div class="admin-panel">
                        <div class="admin-header">
                            <h2><i class="fas fa-cog"></i> Управление каталогом</h2>
                            <button class="btn btn-light" onclick="UI.toggleAdminPanel()">
                                <i class="fas fa-times"></i> Закрыть
                            </button>
                        </div>
                        
                        <div class="admin-body">
                            <div class="admin-tabs">
                                <button class="admin-tab active" onclick="UI.switchAdminTab('stats')">
                                    <i class="fas fa-chart-bar"></i> Статистика
                                </button>
                                <button class="admin-tab" onclick="UI.switchAdminTab('products')">
                                    <i class="fas fa-box"></i> Товары (${products.length})
                                </button>
                                <button class="admin-tab" onclick="UI.switchAdminTab('import')">
                                    <i class="fas fa-file-import"></i> Импорт/Экспорт
                                </button>
                                <button class="admin-tab" onclick="UI.switchAdminTab('settings')">
                                    <i class="fas fa-sliders-h"></i> Настройки
                                </button>
                            </div>
                            
                            <div class="admin-tab-content active" id="adminTabStats">
                                <div class="stats-grid">
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-box"></i>
                                        </div>
                                        <div class="stat-value">${products.length}</div>
                                        <div class="stat-label">Товаров в каталоге</div>
                                    </div>
                                    
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-layer-group"></i>
                                        </div>
                                        <div class="stat-value">${categories.length}</div>
                                        <div class="stat-label">Категорий</div>
                                    </div>
                                    
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-shopping-cart"></i>
                                        </div>
                                        <div class="stat-value">${cart?.items.length || 0}</div>
                                        <div class="stat-label">Товаров в корзине</div>
                                    </div>
                                    
                                    <div class="stat-card">
                                        <div class="stat-icon">
                                            <i class="fas fa-heart"></i>
                                        </div>
                                        <div class="stat-value">${wishlist.length}</div>
                                        <div class="stat-label">В избранном</div>
                                    </div>
                                </div>
                                
                                <div class="mt-6">
                                    <h3>Быстрые действия</h3>
                                    <div class="grid grid-3 gap-4 mt-4">
                                        <button class="btn btn-primary" onclick="API.loadProducts()">
                                            <i class="fas fa-sync-alt"></i> Обновить каталог
                                        </button>
                                        <button class="btn btn-secondary" onclick="API.saveProductsToGoogleSheets()">
                                            <i class="fas fa-file-export"></i> Экспорт в CSV
                                        </button>
                                        <button class="btn btn-accent" onclick="UI.openProductEditor()">
                                            <i class="fas fa-plus"></i> Добавить товар
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="admin-tab-content" id="adminTabProducts">
                                <div class="flex justify-between items-center mb-4">
                                    <h3>Управление товарами</h3>
                                    <button class="btn btn-primary" onclick="UI.openProductEditor()">
                                        <i class="fas fa-plus"></i> Добавить товар
                                    </button>
                                </div>
                                
                                <div class="overflow-x-auto">
                                    <table class="products-table">
                                        <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>Изображение</th>
                                                <th>Название</th>
                                                <th>Категория</th>
                                                <th>Цена</th>
                                                <th>Количество</th>
                                                <th>Статус</th>
                                                <th>Действия</th>
                                            </tr>
                                        </thead>
                                        <tbody id="adminProductsTable">
                                            <!-- Товары будут загружены динамически -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                            <div class="admin-tab-content" id="adminTabImport">
                                <h3>Импорт и экспорт данных</h3>
                                
                                <div class="grid grid-2 gap-6 mt-6">
                                    <div class="card">
                                        <div class="card-header">
                                            <h4><i class="fas fa-file-import"></i> Импорт из Google Sheets</h4>
                                        </div>
                                        <div class="card-body">
                                            <p>Загрузите данные из вашей Google Sheets таблицы:</p>
                                            <div class="mt-4">
                                                <a href="${CONFIG.GOOGLE_SHEETS.URL}" target="_blank" class="btn btn-secondary">
                                                    <i class="fas fa-external-link-alt"></i> Открыть таблицу
                                                </a>
                                                <button class="btn btn-primary" onclick="API.loadProducts()">
                                                    <i class="fas fa-sync-alt"></i> Загрузить данные
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="card">
                                        <div class="card-header">
                                            <h4><i class="fas fa-file-upload"></i> Загрузка CSV файла</h4>
                                        </div>
                                        <div class="card-body">
                                            <p>Загрузите CSV файл с товарами:</p>
                                            <div class="import-box mt-4" onclick="document.getElementById('csvUpload').click()">
                                                <div class="import-icon">
                                                    <i class="fas fa-file-upload"></i>
                                                </div>
                                                <p>Нажмите для выбора файла</p>
                                                <input type="file" id="csvUpload" accept=".csv" style="display: none;" 
                                                       onchange="UI.handleCSVUpload(event)">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="card">
                                        <div class="card-header">
                                            <h4><i class="fas fa-file-export"></i> Экспорт данных</h4>
                                        </div>
                                        <div class="card-body">
                                            <p>Скачайте текущий каталог в различных форматах:</p>
                                            <div class="flex gap-2 mt-4">
                                                <button class="btn btn-outline" onclick="Utils.exportCSV(products, 'products.csv')">
                                                    <i class="fas fa-file-csv"></i> CSV
                                                </button>
                                                <button class="btn btn-outline" onclick="UI.exportJSON()">
                                                    <i class="fas fa-file-code"></i> JSON
                                                </button>
                                                <button class="btn btn-outline" onclick="UI.exportExcel()">
                                                    <i class="fas fa-file-excel"></i> Excel
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="card">
                                        <div class="card-header">
                                            <h4><i class="fab fa-github"></i> Синхронизация с GitHub</h4>
                                        </div>
                                        <div class="card-body">
                                            <p>Работайте с каталогом через GitHub:</p>
                                            <div class="mt-4">
                                                <a href="${CONFIG.GITHUB.REPO_URL}" target="_blank" class="btn btn-secondary">
                                                    <i class="fab fa-github"></i> Открыть репозиторий
                                                </a>
                                                <a href="${CONFIG.GITHUB.CSV_URL}" target="_blank" class="btn btn-primary">
                                                    <i class="fas fa-external-link-alt"></i> CSV на GitHub
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="admin-tab-content" id="adminTabSettings">
                                <h3>Настройки магазина</h3>
                                <div class="settings mt-6">
                                    <div class="settings-group">
                                        <h4 class="settings-title">Основные настройки</h4>
                                        <div class="setting-item">
                                            <div class="setting-label">Название магазина</div>
                                            <input type="text" class="form-control" value="PRODTORG" style="width: 200px;">
                                        </div>
                                        <div class="setting-item">
                                            <div class="setting-label">Валюта</div>
                                            <select class="form-control" style="width: 200px;">
                                                <option>RUB (₽)</option>
                                                <option>USD ($)</option>
                                                <option>EUR (€)</option>
                                            </select>
                                        </div>
                                        <div class="setting-item">
                                            <div class="setting-label">Язык</div>
                                            <select class="form-control" style="width: 200px;">
                                                <option>Русский</option>
                                                <option>English</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="settings-group">
                                        <h4 class="settings-title">Настройки каталога</h4>
                                        <div class="setting-item">
                                            <div class="setting-label">Товаров на странице</div>
                                            <input type="number" class="form-control" value="12" style="width: 100px;">
                                        </div>
                                        <div class="setting-item">
                                            <div class="setting-label">Вид по умолчанию</div>
                                            <select class="form-control" style="width: 150px;">
                                                <option value="grid">Сетка</option>
                                                <option value="list">Список</option>
                                            </select>
                                        </div>
                                        <div class="setting-item">
                                            <div class="setting-label">Автообновление</div>
                                            <label class="switch">
                                                <input type="checkbox" checked>
                                                <span class="slider round"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(adminModal);
                this.updateAdminProductsTable();
            },

            updateAdminProductsTable() {
                const table = document.getElementById('adminProductsTable');
                if (!table) return;
                
                table.innerHTML = products.map(product => `
                    <tr>
                        <td>${product.id.substring(0, 8)}...</td>
                        <td>
                            <div class="product-table-image">
                                <img src="${product.getThumbnail()}" alt="${product.name}">
                            </div>
                        </td>
                        <td>
                            <strong>${product.name}</strong><br>
                            <small class="text-light">${Utils.truncate(product.description, 50)}</small>
                        </td>
                        <td>${product.category}</td>
                        <td>${Utils.formatPrice(product.price)}</td>
                        <td>
                            <span class="status-badge status-${product.getStockStatus()}">
                                ${product.getStockStatusText()}
                            </span>
                        </td>
                        <td>
                            <div class="action-buttons">
                                <button class="btn btn-sm btn-outline" onclick="UI.editProduct('${product.id}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="UI.deleteProduct('${product.id}')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            },

            renderFooter() {
                const footer = document.createElement('footer');
                footer.innerHTML = `
                    <div class="container">
                        <div class="footer-content">
                            <div class="footer-section">
                                <h3>PRODTORG</h3>
                                <p>Интернет-магазин с синхронизацией Google Sheets</p>
                                <div class="mt-4">
                                    <a href="${CONFIG.GITHUB.REPO_URL}" target="_blank" class="btn btn-outline btn-sm">
                                        <i class="fab fa-github"></i> GitHub
                                    </a>
                                    <a href="${CONFIG.GOOGLE_SHEETS.URL}" target="_blank" class="btn btn-outline btn-sm">
                                        <i class="fas fa-table"></i> Google Sheets
                                    </a>
                                </div>
                            </div>
                            
                            <div class="footer-section">
                                <h3>Категории</h3>
                                <ul class="footer-links">
                                    ${categories.slice(0, 5).map(cat => `
                                        <li><a href="#category-${cat.slug}">${cat.name}</a></li>
                                    `).join('')}
                                </ul>
                            </div>
                            
                            <div class="footer-section">
                                <h3>Информация</h3>
                                <ul class="footer-links">
                                    <li><a href="#about">О нас</a></li>
                                    <li><a href="#contacts">Контакты</a></li>
                                    <li><a href="#delivery">Доставка и оплата</a></li>
                                    <li><a href="#warranty">Гарантия</a></li>
                                    <li><a href="#faq">Вопросы и ответы</a></li>
                                </ul>
                            </div>
                            
                            <div class="footer-section">
                                <h3>Контакты</h3>
                                <ul class="footer-links">
                                    <li><i class="fas fa-phone"></i> +7 (999) 123-45-67</li>
                                    <li><i class="fas fa-envelope"></i> info@prodtorg.ru</li>
                                    <li><i class="fas fa-map-marker-alt"></i> г. Барнаул</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="footer-bottom">
                            <p>© ${CONFIG.APP.YEAR} ${CONFIG.APP.NAME}. Все права защищены.</p>
                            <p>Версия ${CONFIG.APP.VERSION} | Разработчик: ${CONFIG.APP.AUTHOR}</p>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(footer);
            },

            // ==================== МЕТОДЫ UI ====================
            bindEvents() {
                // Поиск
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.addEventListener('input', Utils.debounce((e) => {
                        this.searchProducts(e.target.value);
                    }, 300));
                }

                // Обработка загрузки CSV
                window.handleCSVUpload = this.handleCSVUpload.bind(this);
                
                // Обновление корзины
                if (window.cart) {
                    window.cart.load();
                    this.updateCart();
                }
                
                // Загрузка избранного
                const savedWishlist = localStorage.getItem('wishlist');
                if (savedWishlist) {
                    wishlist = JSON.parse(savedWishlist);
                    this.updateWishlistCount();
                }
            },

            toggleCart() {
                const modal = document.getElementById('cartModal');
                if (modal) {
                    modal.classList.toggle('active');
                    if (modal.classList.contains('active')) {
                        this.updateCart();
                    }
                }
            },

            toggleWishlist() {
                Utils.showNotification('Избранное в разработке', 'info');
            },

            toggleAdminPanel() {
                const modal = document.getElementById('adminModal');
                if (modal) {
                    modal.classList.toggle('active');
                    if (modal.classList.contains('active')) {
                        this.updateAdminProductsTable();
                    }
                }
            },

            switchAdminTab(tabName) {
                // Скрываем все вкладки
                document.querySelectorAll('.admin-tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelectorAll('.admin-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // Показываем выбранную вкладку
                const tab = document.getElementById(`adminTab${tabName.charAt(0).toUpperCase() + tabName.slice(1)}`);
                if (tab) {
                    tab.classList.add('active');
                }
                
                // Активируем кнопку вкладки
                const tabButtons = document.querySelectorAll('.admin-tab');
                tabButtons.forEach(button => {
                    if (button.textContent.includes(this.getTabTitle(tabName))) {
                        button.classList.add('active');
                    }
                });
            },

            getTabTitle(tabName) {
                switch(tabName) {
                    case 'stats': return 'Статистика';
                    case 'products': return 'Товары';
                    case 'import': return 'Импорт/Экспорт';
                    case 'settings': return 'Настройки';
                    default: return tabName;
                }
            },

            toggleSortDropdown() {
                const dropdown = document.getElementById('sortDropdown');
                if (dropdown) {
                    dropdown.classList.toggle('active');
                }
            },

            setView(view) {
                currentView = view;
                this.updateProductsDisplay();
                
                // Обновляем активные кнопки
                document.querySelectorAll('.view-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
            },

            sortProducts(sortType) {
                currentSort = sortType;
                this.updateProductsDisplay();
                
                // Обновляем метку
                const label = document.getElementById('sortLabel');
                if (label) {
                    const labels = {
                        'default': 'По умолчанию',
                        'price_asc': 'Цена ↑',
                        'price_desc': 'Цена ↓',
                        'name': 'По названию',
                        'new': 'Новые'
                    };
                    label.textContent = labels[sortType] || 'Сортировка';
                }
                
                // Скрываем dropdown
                const dropdown = document.getElementById('sortDropdown');
                if (dropdown) {
                    dropdown.classList.remove('active');
                }
            },

            filterByCategory(categoryName) {
                // Фильтрация будет реализована позже
                Utils.showNotification(`Фильтр по категории: ${categoryName}`, 'info');
            },

            searchProducts(query) {
                // Поиск будет реализован позже
                if (query) {
                    Utils.showNotification(`Поиск: ${query}`, 'info');
                }
            },

            addToCart(productId) {
                const product = products.find(p => p.id === productId);
                if (!product) return;
                
                if (!window.cart) {
                    window.cart = new Cart();
                }
                
                window.cart.addItem(product, 1);
                this.updateCart();
                Utils.showNotification(`${product.name} добавлен в корзину`, 'success');
            },

            removeFromCart(itemId) {
                if (window.cart) {
                    window.cart.removeItem(itemId);
                    this.updateCart();
                    Utils.showNotification('Товар удален из корзины', 'info');
                }
            },

            updateCartQuantity(itemId, quantity) {
                if (window.cart) {
                    window.cart.updateQuantity(itemId, quantity);
                    this.updateCart();
                }
            },

            toggleWishlistItem(productId) {
                const index = wishlist.indexOf(productId);
                if (index === -1) {
                    wishlist.push(productId);
                    Utils.showNotification('Добавлено в избранное', 'success');
                } else {
                    wishlist.splice(index, 1);
                    Utils.showNotification('Удалено из избранного', 'info');
                }
                
                localStorage.setItem('wishlist', JSON.stringify(wishlist));
                this.updateWishlistCount();
                this.updateProductsDisplay();
            },

            updateWishlistCount() {
                const countElement = document.getElementById('wishlistCount');
                if (countElement) {
                    countElement.textContent = wishlist.length;
                }
            },

            quickView(productId) {
                const product = products.find(p => p.id === productId);
                if (!product) return;
                
                const modal = document.createElement('div');
                modal.className = 'modal active';
                modal.innerHTML = `
                    <div class="modal-content" style="max-width: 800px;">
                        <div class="modal-header">
                            <h3>Быстрый просмотр</h3>
                            <button class="btn btn-light" onclick="this.closest('.modal').remove()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="grid grid-2 gap-6">
                                <div>
                                    <img src="${product.getMainImage()}" alt="${product.name}" 
                                         style="width: 100%; border-radius: var(--radius-lg);">
                                </div>
                                <div>
                                    <h2>${product.name}</h2>
                                    <div class="text-light">${product.category}</div>
                                    
                                    <div class="product-price my-4">
                                        <span class="current-price" style="font-size: 2rem;">${Utils.formatPrice(product.price)}</span>
                                        ${product.oldPrice > product.price ? 
                                            `<span class="old-price">${Utils.formatPrice(product.oldPrice)}</span>` : ''}
                                    </div>
                                    
                                    <p>${product.description}</p>
                                    
                                    <div class="stock-status my-4">
                                        <span class="stock-indicator stock-${product.getStockStatus()}"></span>
                                        ${product.getStockStatusText()} • ${product.quantity} шт.
                                    </div>
                                    
                                    <div class="flex gap-4 mt-6">
                                        <button class="btn btn-primary btn-lg" onclick="UI.addToCart('${product.id}')">
                                            <i class="fas fa-cart-plus"></i> В корзину
                                        </button>
                                        <button class="btn btn-outline btn-lg" onclick="UI.toggleWishlistItem('${product.id}')">
                                            <i class="${wishlist.includes(product.id) ? 'fas' : 'far'} fa-heart"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
            },

            compareProduct(productId) {
                Utils.showNotification('Сравнение товаров в разработке', 'info');
            },

            checkout() {
                if (!window.cart || window.cart.items.length === 0) {
                    Utils.showNotification('Корзина пуста', 'warning');
                    return;
                }
                
                const order = window.cart.toOrder();
                orders.push(order);
                localStorage.setItem('orders', JSON.stringify(orders));
                
                window.cart.clear();
                this.updateCart();
                this.toggleCart();
                
                Utils.showNotification(`Заказ №${order.id} оформлен!`, 'success');
            },

            handleCSVUpload(event) {
                const file = event.target.files[0];
                if (!file) return;
                
                API.uploadCSV(file).then(() => {
                    this.updateProductsDisplay();
                    this.updateAdminProductsTable();
                    this.renderCategories(); // Обновляем категории
                });
            },

            openProductEditor(productId = null) {
                const product = productId ? products.find(p => p.id === productId) : new Product({});
                const isEdit = !!productId;
                
                const modal = document.createElement('div');
                modal.className = 'modal active';
                modal.innerHTML = `
                    <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
                        <div class="modal-header">
                            <h3>${isEdit ? 'Редактирование товара' : 'Добавление товара'}</h3>
                            <button class="btn btn-light" onclick="this.closest('.modal').remove()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form id="productForm" onsubmit="return UI.saveProduct(event, '${productId}')">
                                <div class="grid grid-2 gap-4">
                                    <div class="form-group">
                                        <label class="form-label">Название товара *</label>
                                        <input type="text" class="form-control" name="name" value="${product.name}" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Категория *</label>
                                        <select class="form-control" name="category" required>
                                            <option value="">Выберите категорию</option>
                                            ${categories.map(cat => `
                                                <option value="${cat.name}" ${cat.name === product.category ? 'selected' : ''}>
                                                    ${cat.name}
                                                </option>
                                            `).join('')}
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Цена (₽) *</label>
                                        <input type="number" class="form-control" name="price" value="${product.price}" step="0.01" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Старая цена (₽)</label>
                                        <input type="number" class="form-control" name="oldPrice" value="${product.oldPrice}" step="0.01">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Количество *</label>
                                        <input type="number" class="form-control" name="quantity" value="${product.quantity}" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Артикул (SKU)</label>
                                        <input type="text" class="form-control" name="sku" value="${product.sku}">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Описание</label>
                                    <textarea class="form-control" name="description" rows="4">${product.description}</textarea>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">URL изображения</label>
                                    <input type="text" class="form-control" name="image" value="${product.images[0] || ''}" 
                                           placeholder="https://example.com/image.jpg">
                                </div>
                                
                                <div class="flex gap-4 mt-6">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-save"></i> ${isEdit ? 'Сохранить' : 'Добавить'}
                                    </button>
                                    <button type="button" class="btn btn-outline" onclick="this.closest('.modal').remove()">
                                        Отмена
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(modal);
            },

            async saveProduct(event, productId) {
                event.preventDefault();
                
                const form = event.target;
                const formData = new FormData(form);
                const productData = {
                    name: formData.get('name'),
                    category: formData.get('category'),
                    price: parseFloat(formData.get('price')),
                    oldPrice: parseFloat(formData.get('oldPrice')) || 0,
                    quantity: parseInt(formData.get('quantity')),
                    sku: formData.get('sku'),
                    description: formData.get('description'),
                    images: [formData.get('image')].filter(Boolean)
                };
                
                if (productId) {
                    // Редактирование существующего товара
                    const index = products.findIndex(p => p.id === productId);
                    if (index !== -1) {
                        products[index] = new Product({
                            ...products[index],
                            ...productData,
                            updatedAt: new Date().toISOString()
                        });
                        Utils.showNotification('Товар обновлен', 'success');
                    }
                } else {
                    // Добавление нового товара
                    const newProduct = new Product({
                        ...productData,
                        id: Utils.generateId('prod_')
                    });
                    products.push(newProduct);
                    Utils.showNotification('Товар добавлен', 'success');
                }
                
                // Сохраняем изменения
                localStorage.setItem('products_data', JSON.stringify(products));
                
                // Обновляем UI
                this.updateProductsDisplay();
                this.updateAdminProductsTable();
                
                // Обновляем категории
                categories = [...new Set(products.map(p => p.category))]
                    .filter(Boolean)
                    .map(name => new Category({ name }));
                localStorage.setItem('categories_data', JSON.stringify(categories));
                
                // Закрываем модальное окно
                form.closest('.modal').remove();
                
                return false;
            },

            editProduct(productId) {
                this.openProductEditor(productId);
            },

            async deleteProduct(productId) {
                const confirmed = await Utils.confirm('Удалить этот товар?');
                if (!confirmed) return;
                
                const index = products.findIndex(p => p.id === productId);
                if (index !== -1) {
                    products.splice(index, 1);
                    
                    // Сохраняем изменения
                    localStorage.setItem('products_data', JSON.stringify(products));
                    
                    // Обновляем UI
                    this.updateProductsDisplay();
                    this.updateAdminProductsTable();
                    
                    Utils.showNotification('Товар удален', 'success');
                }
            },

            exportJSON() {
                const dataStr = JSON.stringify(products, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                
                const link = document.createElement('a');
                link.href = url;
                link.download = 'products.json';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                Utils.showNotification('Данные экспортированы в JSON', 'success');
            },

            exportExcel() {
                // Простой экспорт в CSV под видом Excel
                Utils.exportCSV(products.map(p => ({
                    ID: p.id,
                    Название: p.name,
                    Категория: p.category,
                    Цена: p.price,
                    'Старая цена': p.oldPrice,
                    Количество: p.quantity,
                    Описание: p.description,
                    Изображение: p.images[0] || ''
                })), 'products.xls');
                
                Utils.showNotification('Данные экспортированы в Excel', 'success');
            }
        };

        // ==================== ИНИЦИАЛИЗАЦИЯ ====================
        document.addEventListener('DOMContentLoaded', async () => {
            // Инициализируем корзину
            window.cart = new Cart();
            window.cart.load();
            
            // Загружаем товары
            await API.loadProducts();
            
            // Инициализируем UI
            UI.init();
            
            // Загружаем заказы
            const savedOrders = localStorage.getItem('orders');
            if (savedOrders) {
                orders = JSON.parse(savedOrders);
            }
            
            // Показываем приветственное сообщение
            setTimeout(() => {
                Utils.showNotification(`Добро пожаловать в ${CONFIG.APP.NAME}! Загружено ${products.length} товаров.`, 'info');
            }, 1000);
        });

        // ==================== ГЛОБАЛЬНЫЙ ЭКСПОРТ ====================
        window.APP = {
            CONFIG,
            products,
            categories,
            cart: window.cart,
            wishlist,
            orders,
            Utils,
            API,
            UI,
            Product,
            Category,
            Cart,
            Coupon,
            ShippingMethod
        };

        // ==================== СЛУЖЕБНЫЕ ФУНКЦИИ ====================
        // Добавляем глобальные функции для HTML событий
        window.toggleCart = () => UI.toggleCart();
        window.toggleWishlist = () => UI.toggleWishlist();
        window.toggleAdminPanel = () => UI.toggleAdminPanel();
        window.addToCart = (productId) => UI.addToCart(productId);
        window.toggleWishlistItem = (productId) => UI.toggleWishlistItem(productId);
        window.quickView = (productId) => UI.quickView(productId);
        window.compareProduct = (productId) => UI.compareProduct(productId);
        window.updateCartQuantity = (itemId, quantity) => UI.updateCartQuantity(itemId, quantity);
        window.removeFromCart = (itemId) => UI.removeFromCart(itemId);
        window.checkout = () => UI.checkout();
        window.loadProducts = () => API.loadProducts().then(() => {
            UI.updateProductsDisplay();
            UI.updateAdminProductsTable();
        });
        window.saveProductsToGoogleSheets = () => API.saveProductsToGoogleSheets();
        window.handleCSVUpload = (event) => UI.handleCSVUpload(event);
        window.editProduct = (productId) => UI.editProduct(productId);
        window.deleteProduct = (productId) => UI.deleteProduct(productId);
        window.switchAdminTab = (tabName) => UI.switchAdminTab(tabName);
        window.setView = (view) => UI.setView(view);
        window.sortProducts = (sortType) => UI.sortProducts(sortType);
        window.toggleSortDropdown = () => UI.toggleSortDropdown();
        window.filterByCategory = (categoryName) => UI.filterByCategory(categoryName);
        window.openProductEditor = (productId) => UI.openProductEditor(productId);
        window.saveProduct = (event, productId) => UI.saveProduct(event, productId);

        // ==================== CSS ДЛЯ ДИНАМИЧЕСКИХ ЭЛЕМЕНТОВ ====================
        const dynamicStyles = document.createElement('style');
        dynamicStyles.textContent = `
            .product-table-image {
                width: 60px;
                height: 60px;
                border-radius: var(--radius-sm);
                overflow: hidden;
            }
            
            .product-table-image img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
            
            .sort-dropdown {
                position: relative;
            }
            
            .sort-dropdown-content {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--bg-white);
                border-radius: var(--radius-md);
                box-shadow: var(--shadow-lg);
                z-index: 100;
                margin-top: 5px;
            }
            
            .sort-dropdown-content.active {
                display: block;
            }
            
            .admin-modal {
                display: none;
            }
            
            .admin-modal.active {
                display: flex;
            }
            
            .cart-modal {
                display: none;
            }
            
            .cart-modal.active {
                display: flex;
            }
            
            .modal {
                display: none;
            }
            
            .modal.active {
                display: flex;
            }
            
            .view-toggle {
                display: flex;
                background: var(--bg-lighter);
                border-radius: var(--radius-md);
                padding: 4px;
            }
            
            .view-btn {
                width: 40px;
                height: 40px;
                border: none;
                background: transparent;
                border-radius: var(--radius-sm);
                color: var(--text-medium);
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all var(--transition-fast);
            }
            
            .view-btn.active {
                background: var(--bg-white);
                color: var(--primary);
                box-shadow: var(--shadow-xs);
            }
        `;
        document.head.appendChild(dynamicStyles);
    </script>
</body>
</html>
